var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);import{u as n,c as r,d as s,s as o,o as i,a,i as l,t as c,r as u,p as d,w as h,b as v,h as p,e as g,f as m,g as f,j as y,k as b,l as E,m as D,n as w,q as O,v as S,x as L,y as T,z as k,A as M,B as z,C as x,D as P,F as _,E as I,G as X,H as Y,I as N,J as C,K as $,L as A,M as B}from"./vendor-CiL_LcDq.js";function F(e){const t=n("history");return r((()=>{return e[(n=t.lang,"en"!==n&&"zh-cn"!==n?"en":n)];var n}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class H{constructor(e){this.dnd=e}}class U{constructor(){t(this,"_canceled",!1)}get cancelable(){return this.constructor.cancelable}get type(){return this.constructor.type}cancel(){this.cancelable&&(this._canceled=!0)}canceled(){return this._canceled}}t(U,"type","event"),t(U,"cancelable",!1);class j extends U{constructor(e,t,n,r){super(),this.source=e,this.mirror=t,this.container=n,this.dndEvent=r}}class q extends j{}t(q,"type","mirror:created");class K extends j{}t(K,"type","mirror:attached");class R extends j{}t(R,"type","mirror:move");class V extends j{}t(V,"type","mirror:detached");class W{constructor(){t(this,"callbacks",{}),t(this,"onceCallbacks",new Set)}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}once(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this.onceCallbacks.add(t),this}off(e,t){if(!this.callbacks[e])return this;const n=this.callbacks[e],r=n.indexOf(t);return r>=0&&n.splice(r,1),this.onceCallbacks.delete(t),this}emit(e,t){if(!this.callbacks[e])return this;const n=[...this.callbacks[e]],r=[];for(let o=0;o<=n.length-1;o++){const i=n[o];try{i(t)}catch(s){r.push(s)}this.onceCallbacks.has(i)&&this.off(e,i)}return r.length&&(console.error(`[vdnd error]: caught errors while emitting '${e}':`),r.forEach((e=>console.error(e)))),this}destroy(){this.callbacks={},this.onceCallbacks.clear()}}const G=()=>{};function J(e){return Array.isArray(e)?e:[e]}function Q(e){return null!=e}function Z(e){if(null===e)return"null";if(void 0===e)return"undefined";if("string"==typeof e)return"string";if("number"==typeof e)return"number";if("boolean"==typeof e)return"boolean";if("symbol"==typeof e)return"symbol";if("bigint"==typeof e)return"bigint";const t=Object.prototype.toString.call(e);return t.slice(8,t.length-1)}const ee={className:"dnd-mirror",create:e=>e.source.cloneNode(!0),appendTo:e=>e.source.parentNode||document.body,constrainDimensions:!1};function te(e){const{source:t,...n}=e;return ae((e=>{const r=t.getBoundingClientRect();e({source:t,sourceRect:r,...n})}))}function ne({dragEvent:e,sourceRect:t,options:n,...r}){return ae((s=>{const o="number"!=typeof n.cursorOffsetY?e.clientY-t.top:n.cursorOffsetY,i="number"!=typeof n.cursorOffsetX?e.clientX-t.left:n.cursorOffsetX;s({dragEvent:e,sourceRect:t,mirrorOffset:{top:o,left:i},options:n,...r})}))}function re({mirror:e,source:t,options:n,...r}){return ae((s=>{let o,i;if(n.constrainDimensions){const e=getComputedStyle(t);o=e.getPropertyValue("height"),i=e.getPropertyValue("width")}e.style.display=null,e.style.position="fixed",e.style.pointerEvents="none",e.style.top=0,e.style.left=0,e.style.margin=0,n.constrainDimensions&&(e.style.height=o,e.style.width=i),s({mirror:e,source:t,options:n,...r})}))}function se({mirror:e,mirrorClasses:t,...n}){return ae((r=>{e.classList.add(...t),r({mirror:e,mirrorClasses:t,...n})}))}function oe({mirror:e,source:t,...n}){return ae((r=>{t.getAttribute("id")===e.getAttribute("id")&&(e.removeAttribute("id"),delete e.id),r({mirror:e,...n})}))}function ie(e){const{raf:t=!1,initial:n=!1}=e;return({mirror:e,dragEvent:r,mirrorOffset:s,initialY:o,initialX:i,scrollOffset:a,options:l,lastMovedX:c,lastMovedY:u,...d})=>ae((t=>{const o={mirror:e,dragEvent:r,mirrorOffset:s,options:l,...d};if(s){const t=Math.round(r.clientX-s.left-a.x),i=Math.round(r.clientY-s.top-a.y);e.style.transform=`translate3d(${t}px, ${i}px, 0)`,n&&(o.initialX=t,o.initialY=i),o.lastMovedX=t,o.lastMovedY=i}t(o)}),{raf:t})}function ae(e,{raf:t=!1}={}){return new Promise(((n,r)=>{t?requestAnimationFrame((()=>{e(n,r)})):e(n,r)}))}function le(e,t){if(t instanceof Node)return le(e,[t]);if(t instanceof NodeList)return le(e,Array.from(t));function n(e){return function(e){return"string"==typeof e}(t)?e.classList.contains(t):function(e){return"function"==typeof e}(t)?t(e):function(e){return Array.isArray(e)}(t)?t.includes(e):void 0}let r=e;do{if(n(r))return r;r=(null==r?void 0:r.parentElement)||null}while(null!=r&&r!==document.body);return null}function ce(e,t){const{isHandle:n,isSource:r}=t,s=[];for(let o,i=0;i<e.children.length;i++)o=e.children.item(i),o instanceof Element&&!r(o)&&(n(o)?s.push(o):s.push(...ce(o,t)));return s}class ue{constructor(e,n,r,s,o,i){t(this,"startEvent",null),t(this,"source",null),this.env=e,this.container=n,this.options=r,this.onDragStrat=s,this.onDragMove=o,this.onDragEnd=i}getSource(e){if(!(e.target instanceof Element&&le(e.target,this.container)))return null;const t=le(e.target,this.options.source);if(!t)return null;if(this.options.handle){const n=ce(t,{isSource:e=>e.classList.contains(this.options.source),isHandle:e=>e.classList.contains(this.options.handle)});if(n.length>0&&n.every((t=>!le(e.target,t))))return null}return t}get dragging(){return null!==this.source}}class de extends U{constructor(e,t,n,r,s,o){super(),this.target=e,this.source=t,this.container=n,this.clientX=r,this.clientY=s,this.originalEvent=o}}class he extends de{}t(he,"type","drag:start"),t(he,"cancelable",!0);class ve extends de{}t(ve,"type","drag:move");class pe extends de{}t(pe,"type","drag:end");class ge extends ue{constructor(){super(...arguments),t(this,"onMouseDown",(e=>{if(0!==e.button||e.altKey||this.dragging)return;const t=this.getSource(e);t&&(this.source=t,this.startEvent=e,this.env.addEventListener("mouseup",this.onMouseUp),this.env.addEventListener("dragstart",me),this.env.addEventListener("mousemove",this.onFirstMouseMove))})),t(this,"onKeyDown",(e=>{var t;if(this.dragging&&e.target&&!e.isComposing&&"escape"===(null==(t=e.code)?void 0:t.toLowerCase())){const{source:t,container:n}=this;this.cancel(),this.onDragEnd(new pe(e.target,t,n,0,0,e))}})),t(this,"onFirstMouseMove",(()=>{this.env.removeEventListener("mousemove",this.onFirstMouseMove),this.startDrag()})),t(this,"onMouseMove",(e=>{if(!(e.target instanceof Element))return;const t=new ve(e.target,this.source,this.container,e.clientX,e.clientY,e);this.onDragMove(t)})),t(this,"onMouseUp",(e=>{if(0!==e.button||!(e.target instanceof Element))return;const{source:t}=this;if(this.cancel(),t){const n=new pe(e.target,t,this.container,e.clientX,e.clientY,e);this.onDragEnd(n)}})),t(this,"onContextMenuWhileDragging",(e=>{e.preventDefault()}))}attach(){return this.env.addEventListener("mousedown",this.onMouseDown,!0),this}detach(){return this.env.removeEventListener("mousedown",this.onMouseDown,!0),this.cancel(),this}startDrag(){const e=new he(this.startEvent.target,this.source,this.container,this.startEvent.clientX,this.startEvent.clientY,this.startEvent);this.onDragStrat(e),e.canceled()?this.cancel():(this.env.addEventListener("keydown",this.onKeyDown),this.env.addEventListener("contextmenu",this.onContextMenuWhileDragging,!0),this.env.addEventListener("mousemove",this.onMouseMove))}cancel(){this.source=null,this.startEvent=null,this.env.removeEventListener("mouseup",this.onMouseUp),this.env.removeEventListener("dragstart",me),this.env.removeEventListener("mousemove",this.onFirstMouseMove),this.env.removeEventListener("keydown",this.onKeyDown),this.env.removeEventListener("contextmenu",this.onContextMenuWhileDragging,!0),this.env.removeEventListener("mousemove",this.onMouseMove)}}function me(e){e.preventDefault()}function fe(e){const{touches:t,changedTouches:n}=e;return t&&t[0]||n&&n[0]}let ye=!1;window.addEventListener("touchmove",(e=>{ye&&e.preventDefault()}),{passive:!1});class be extends ue{constructor(){super(...arguments),t(this,"onTouchStartAt",0),t(this,"onTouchStart",(e=>{if(this.dragging||!(e.target instanceof Element))return;const t=this.getSource(e);t&&(this.source=t,this.startEvent=e,this.onTouchStartAt=Date.now(),this.env.addEventListener("touchend",this.onTouchEnd),this.env.addEventListener("touchcancel",this.onTouchEnd),this.env.addEventListener("touchmove",this.checkElapsedTime),this.env.addEventListener("contextmenu",Ee))})),t(this,"startDrag",(()=>{const e=fe(this.startEvent),t=new he(this.startEvent.target,this.source,this.container,e.pageX,e.pageY,this.startEvent);this.onDragStrat(t),t.canceled()?this.cancel():(ye=!0,this.env.addEventListener("touchmove",this.onTouchMove))})),t(this,"checkElapsedTime",(()=>{this.env.removeEventListener("touchmove",this.checkElapsedTime);Date.now()-this.onTouchStartAt>=this.delay&&this.startDrag()})),t(this,"onTouchMove",(e=>{const{pageX:t,pageY:n}=fe(e),r=document.elementFromPoint(t-window.scrollX,n-window.scrollY);if(!r)return;const s=new ve(r,this.source,this.container,t,n,e);this.onDragMove(s)})),t(this,"onTouchEnd",(e=>{const{source:t}=this;if(this.cancel(),t){e.preventDefault();const{pageX:n,pageY:r}=fe(e),s=document.elementFromPoint(n-window.scrollX,r-window.scrollY);if(!s)return;const o=new pe(s,t,this.container,n,r,e);this.onDragEnd(o)}}))}attach(){return this.env.addEventListener("touchstart",this.onTouchStart),this}detach(){return this.env.removeEventListener("touchstart",this.onTouchStart),this.cancel(),this}get delay(){return this.options.delay??100}cancel(){ye=!1,this.source=null,this.env.removeEventListener("touchend",this.onTouchEnd),this.env.removeEventListener("touchcancel",this.onTouchEnd),this.env.removeEventListener("touchmove",this.checkElapsedTime),this.env.removeEventListener("contextmenu",Ee),this.env.removeEventListener("touchmove",this.onTouchMove)}}function Ee(e){e.preventDefault(),e.stopPropagation()}class De extends W{constructor(e,n){super(),t(this,"source",null),t(this,"currentOver",null),this.container=e,this.options=n}isDraggable(e){var t,n;return(null==(n=(t=this.options).isDraggable)?void 0:n.call(t,e))??!0}isDroppable(e){var t,n;return(null==(n=(t=this.options).isDroppable)?void 0:n.call(t,e))??!0}get dragging(){return null!==this.source}isDragging(e){return!!this.dragging&&(e?this.source===e:this.dragging)}}class we extends U{constructor(e,t,n,r){super(),this.source=e,this.over=t,this.container=n,this.originalEvent=r}}t(we,"type","drag");class Oe extends U{constructor(e,t,n,r,s){super(),this.source=e,this.container=t,this.originalEvent=n,this.clientX=r,this.clientY=s}}t(Oe,"type","drag:start");class Se extends U{constructor(e,t,n){super(),this.source=e,this.container=t,this.originalEvent=n}}t(Se,"type","drag:prevent");class Le extends U{constructor(e,t,n,r){super(),this.source=e,this.enter=t,this.container=n,this.originalEvent=r}}t(Le,"type","drag:enter");class Te extends U{constructor(e,t,n,r,s,o){super(),this.source=e,this.over=t,this.container=n,this.originalEvent=r,this.clientX=s,this.clientY=o}}t(Te,"type","drag:move");class ke extends U{constructor(e,t,n,r){super(),this.source=e,this.over=t,this.container=n,this.originalEvent=r}}t(ke,"type","drag:over");class Me extends U{constructor(e,t,n,r){super(),this.source=e,this.leave=t,this.container=n,this.originalEvent=r}}t(Me,"type","drag:leave");class ze extends U{constructor(e,t,n,r){super(),this.source=e,this.dropzone=t,this.container=n,this.originalEvent=r}}t(ze,"type","drop");class xe extends U{constructor(e,t,n,r){super(),this.source=e,this.over=t,this.container=n,this.originalEvent=r}}t(xe,"type","drag:end");const Pe=class e{constructor(e=document){t(this,"enabled",!1),t(this,"permittedListenersMap",new Map),t(this,"listenersToSuppress",new Map),t(this,"wrappersMapOfPermittedListeners",new Map),this.document=e}isBeingSuppressed(e){return this.enabled&&this.listenersToSuppress.has(e)}enable(){this.enabled=!0}disable(){this.enabled=!1}suppress(t,n){this.unsuppress(t);const r=r=>{if(!this.enabled||!e.isTrustedEvent(r))return;n.preventDefault&&r.preventDefault(),n.stopPropagation&&r.stopPropagation(),n.stopImmediatePropagation&&r.stopImmediatePropagation();const s=this.permittedListenersMap.get(t);s&&s.forEach((e=>e(r)))};this.listenersToSuppress.set(t,r),this.document.addEventListener(t,r,{capture:!0})}unsuppress(e){const t=this.listenersToSuppress.get(e);t&&(this.listenersToSuppress.delete(e),this.document.removeEventListener(e,t,{capture:!0}))}addEventListenerSafely(t,n,r){let s=this.permittedListenersMap.get(t);s||(s=new Set,this.permittedListenersMap.set(t,s)),s.add(n);let o=this.wrappersMapOfPermittedListeners.get(t);o||(o=new Set,this.wrappersMapOfPermittedListeners.set(t,o));const i=r=>{e.isTrustedEvent(r)&&this.isBeingSuppressed(t)||n(r)};i.raw=n,i.options=r,o.add(i),this.document.addEventListener(t,i,r)}removeEventListener(e,t,n){const r=this.permittedListenersMap.get(e);r&&r.delete(t);const s=this.wrappersMapOfPermittedListeners.get(e);if(s){let r=null;for(const e of s.values())if(e.raw===t){r=e;break}r&&(s.delete(r),this.document.removeEventListener(e,r,n))}}destroy(){for(const[e,t]of this.listenersToSuppress.entries())this.document.removeEventListener(e,t,{capture:!0});this.listenersToSuppress.clear();for(const[e,t]of this.wrappersMapOfPermittedListeners.entries())t.forEach((t=>{this.document.removeEventListener(e,t,t.options)})),t.clear();this.wrappersMapOfPermittedListeners.clear();for(const e of this.permittedListenersMap.values())e.clear();this.permittedListenersMap.clear()}};t(Pe,"isTrustedEvent",(e=>e.isTrusted));let _e=Pe;function Ie(e,t){e.dropEffect=t?Ne(e.effectAllowed):"none"}function Xe(e,t){t?"none"===e.dropEffect&&(e.dropEffect=Ne(e.effectAllowed),console.warn("[vdnd warn]: Do you set the 'dataTransfer.dropEffect' to 'none'? The 'dataTransfer.dropEffect' for a droppable dropzone must not be 'none', vdnd will force it to be set to not 'none'.")):"none"!==e.dropEffect&&(e.dropEffect="none",console.warn("[vdnd warn]: Do you set the 'dataTransfer.dropEffect' to not 'none'? The 'dataTransfer.dropEffect' for a not droppable dropzone must be 'none', vdnd will force it to be set to 'none'."))}let Ye=class extends De{constructor(e,n){super(e,n),t(this,"shouldSkipDragLeaveHandler",!1),t(this,"temporaryPreviousOver",null),t(this,"temporaryLeave",null),t(this,"trigger",null),t(this,"onDrag",(e=>{if(!(this.dragging&&e.target instanceof Element&&e.dataTransfer&&le(e.target,this.trigger)))return;const t=new we(this.source,this.currentOver,this.container,e);this.emit("drag",t)})),t(this,"onDragStart",(e=>{if(this.dragging||!e.dataTransfer)return;if(!le(e.target,this.container))return null;const t=le(e.target,this.options.source);if(!t)return;let n,r=[];if(this.options.handle&&(r=ce(t,{isSource:e=>e.classList.contains(this.options.source),isHandle:e=>e.classList.contains(this.options.handle)}),r.length)){if(n=r.find((t=>!!le(e.target,t))),!n)return void e.preventDefault();if(!function(e,t){let n=e;for(;n!==t&&!n.draggable&&n.parentElement;)n=n.parentElement;return n!==t}(n,t))return void console.error("[vdnd error]: NativeDnd requires the handle must be draggable, the illegal handle is ",n)}if(!this.isDraggable(t)){e.preventDefault();const n=new Se(t,this.container,e);return void this.emit("drag:prevent",n)}if(this.source=t,this.trigger=n||t,n&&e.dataTransfer){const{top:t,left:n}=this.source.getBoundingClientRect();e.dataTransfer.setDragImage(this.source,e.clientX-n,e.clientY-t)}const s=new Oe(t,this.container,e);this.emit("drag:start",s)})),t(this,"onDragEnter",(e=>{if(!(this.dragging&&e.target instanceof Element&&e.dataTransfer))return;const t=le(e.target,this.container)&&le(e.target,this.options.dropzone);if(!t)return;if(e.preventDefault(),Ie(e.dataTransfer,this.isDroppable(t)),this.temporaryLeave=null,t===this.currentOver)return void(this.shouldSkipDragLeaveHandler=!0);this.temporaryPreviousOver=this.currentOver,this.currentOver=t;const n=new Le(this.source,t,this.container,e);this.emit("drag:enter",n),Xe(e.dataTransfer,this.isDroppable(t))})),t(this,"onDragLeave",(e=>{if(!this.dragging||this.shouldSkipDragLeaveHandler||!e.dataTransfer||e.target!==this.temporaryPreviousOver&&e.target!==this.currentOver)return void(this.shouldSkipDragLeaveHandler=!1);this.shouldSkipDragLeaveHandler=!1;const t=this.temporaryPreviousOver||this.currentOver;this.temporaryPreviousOver=null,null===e.relatedTarget&&(this.temporaryLeave=t),t===this.currentOver&&(this.currentOver=null);const n=new Me(this.source,t,this.container,e);this.emit("drag:leave",n)})),t(this,"onDragOver",(e=>{if(!(this.dragging&&this.currentOver&&e.target instanceof Element&&e.dataTransfer&&le(e.target,this.currentOver)))return;const t=this.isDroppable(this.currentOver);t&&e.preventDefault(),Ie(e.dataTransfer,t);const n=new ke(this.source,this.currentOver,this.container,e);this.emit("drag:over",n),Xe(e.dataTransfer,this.isDroppable(this.currentOver))})),t(this,"onDrop",(e=>{if(!(this.dragging&&this.currentOver&&e.target instanceof Element&&e.dataTransfer&&le(e.target,this.currentOver)&&this.isDroppable(this.currentOver)))return;const t=new ze(this.source,this.currentOver,this.container,e);this.emit("drop",t)})),t(this,"onDragEnd",(e=>{if(!(this.dragging&&e.target instanceof Element&&e.dataTransfer&&le(e.target,this.trigger)))return;const t=new xe(this.source,this.currentOver||this.temporaryLeave,this.container,e);this.emit("drag:end",t),this.trigger=null,this.source=null,this.currentOver=null,this.temporaryPreviousOver=null,this.temporaryLeave=null,this.shouldSkipDragLeaveHandler=!1})),this.container=e,this.options=n,document.addEventListener("drag",this.onDrag),document.addEventListener("dragstart",this.onDragStart),document.addEventListener("dragenter",this.onDragEnter),document.addEventListener("dragover",this.onDragOver),document.addEventListener("dragleave",this.onDragLeave),document.addEventListener("dragend",this.onDragEnd),document.addEventListener("drop",this.onDrop)}destroy(){this.dragging||(document.removeEventListener("drag",this.onDrag),document.removeEventListener("dragstart",this.onDragStart),document.removeEventListener("dragenter",this.onDragEnter),document.removeEventListener("dragover",this.onDragOver),document.removeEventListener("dragleave",this.onDragLeave),document.removeEventListener("dragend",this.onDragEnd),document.removeEventListener("drop",this.onDrop),super.destroy())}};function Ne(e){switch(e){case"all":case"copy":case"none":case"copyLink":case"copyMove":case"uninitialized":return"copy";case"link":case"linkMove":return"link";case"move":return"move"}}const Ce=class e extends De{constructor(n,r){super(n,r),t(this,"plugins",[]),t(this,"simulator",null),t(this,"eventSuppressor",null),t(this,"clearIntervalTaskForDrag",G),t(this,"clearIntervalTaskForDragOver",G),this.container=n,this.options=r,this.addPlugin(...e.defaultPlugins),this.eventSuppressor=r.eventSuppressor||null,this.setSimulator(this.options.simulator),this.initIntervalTasks()}destroy(){var e;this.dragging||(this.removePlugin(...this.plugins.map((e=>e.constructor))),this.setSimulator(null),null==(e=this.eventSuppressor)||e.destroy(),super.destroy())}addPlugin(...e){const t=e.map((e=>new e(this)));return t.forEach((e=>e.attach())),this.plugins=[...this.plugins,...t],this}removePlugin(...e){return this.plugins.filter((t=>e.some((e=>t instanceof e)))).forEach((e=>e.detach())),this.plugins=this.plugins.filter((t=>e.some((e=>t instanceof e)))),this}initIntervalTasks(){this.runIntervalTaskForDrag=t=>{const n=setInterval((()=>{if(!t.canceled()&&this.dragging){const e=new we(this.source,this.currentOver,this.container,null);this.emit("drag",e)}}),e.eventTriggeringInterval.drag);this.clearIntervalTaskForDrag=()=>{clearInterval(n),this.clearIntervalTaskForDrag=G}},this.on("drag:start",this.runIntervalTaskForDrag),this.on("drag:end",(()=>this.clearIntervalTaskForDrag())),this.runIntervalTaskForDragOver=()=>{const t=setInterval((()=>{if(!this.dragging||!this.currentOver)return;const e=new ke(this.source,this.currentOver,this.container,null);this.emit("drag:over",e)}),e.eventTriggeringInterval.dragover);this.clearIntervalTaskForDragOver=()=>{clearInterval(t),this.clearIntervalTaskForDragOver=G}},this.on("drag:enter",this.runIntervalTaskForDragOver),this.on("drag:leave",(()=>this.clearIntervalTaskForDragOver()))}setSimulator(e){var t,n;if(this.dragging)return;if(!e)return null==(t=this.simulator)||t.detach(),void(this.simulator=null);null==(n=this.simulator)||n.detach();const r=this.eventSuppressor?{addEventListener:this.eventSuppressor.addEventListenerSafely.bind(this.eventSuppressor),removeEventListener:this.eventSuppressor.removeEventListener.bind(this.eventSuppressor)}:document;return this.simulator=new e(r,this.container,this.options,this.onDragStart.bind(this),this.onDragMove.bind(this),this.onDragEnd.bind(this)),this.simulator.attach(),this}onDragStart(e){var t;if(this.dragging)return;if(!this.isDraggable(e.source)){const t=new Se(e.source,this.container,e.originalEvent);return this.emit("drag:prevent",t),void e.cancel()}this.source=e.source,null==(t=this.eventSuppressor)||t.enable(),Ae(document.body,"none");const n=new Oe(this.source,this.container,e.originalEvent,e.clientX,e.clientY);if(this.emit("drag:start",n),le(this.source,this.options.dropzone)){this.currentOver=this.source;const t=new Le(this.source,this.source,this.container,e.originalEvent);this.emit("drag:enter",t)}}onDragMove(e){if(!this.dragging)return;const t=le(e.target,this.container)&&le(e.target,this.options.dropzone),n=t?!!this.currentOver&&t!==this.currentOver:!!this.currentOver;let r=null;if(t&&this.currentOver!==t){r=t;const n=new Le(this.source,t,this.container,e.originalEvent);this.emit("drag:enter",n)}if(n){const t=new Me(this.source,this.currentOver,this.container,e.originalEvent);this.emit("drag:leave",t),this.currentOver=null}r&&(this.currentOver=r);const s=new Te(this.source,this.currentOver,this.container,e.originalEvent,e.clientX,e.clientY);this.emit("drag:move",s)}onDragEnd(e){var t;if(!this.dragging)return;if(null==(t=this.eventSuppressor)||t.disable(),Ae(document.body,""),this.currentOver){if(!(e.originalEvent instanceof KeyboardEvent)&&this.isDroppable(this.currentOver)){const t=new ze(this.source,this.currentOver,this.container,e.originalEvent);this.emit("drop",t)}else{const t=new Me(this.source,this.currentOver,this.container,e.originalEvent);this.emit("drag:leave",t)}}const n=new xe(this.source,this.currentOver,this.container,e.originalEvent);this.emit("drag:end",n),this.source=null,this.currentOver=null}};t(Ce,"defaultPlugins",[class extends H{constructor(e){super(e),t(this,"scrollOffset",{x:0,y:0}),t(this,"initialScrollOffset",{x:window.scrollX,y:window.scrollY}),t(this,"lastMovedX",0),t(this,"lastMovedY",0),t(this,"mirrorOffset",{top:0,left:0}),t(this,"initialX",0),t(this,"initialY",0),t(this,"mirror",null),t(this,"onDragStart",(async e=>{"ontouchstart"in window&&document.addEventListener("scroll",this.onScroll,!0),this.initialScrollOffset={x:window.scrollX,y:window.scrollY};const{source:t,container:n}=e,r=this.getAppendableContainer({source:t,event:e})||document.body,s=this.options.create;this.mirror=s({source:t,event:e});const o=new q(t,this.mirror,n,e);this.dnd.emit("mirror:created",o);const i=new K(t,this.mirror,n,e);r.appendChild(this.mirror),this.dnd.emit("mirror:attached",i)})),t(this,"onDragMove",(e=>{if(!this.mirror)return;const{source:t,container:n}=e,r=new R(t,this.mirror,n,e);this.dnd.emit("mirror:move",r)})),t(this,"onDragEnd",(e=>{if("ontouchstart"in window&&document.removeEventListener("scroll",this.onScroll,!0),this.initialScrollOffset={x:0,y:0},this.scrollOffset={x:0,y:0},!this.mirror)return;const{source:t,container:n}=e,r=new V(t,this.mirror,n,e);this.mirror.remove(),this.dnd.emit("mirror:detached",r)})),t(this,"onScroll",(()=>{this.scrollOffset={x:window.scrollX-this.initialScrollOffset.x,y:window.scrollY-this.initialScrollOffset.y}})),t(this,"onMirrorCreated",(e=>{const{mirror:t,source:n,dndEvent:r}=e,s=J(this.options.className||"");"style"in t&&"object"==typeof t.style&&(t.style.display="none");const o={mirror:t,source:n,dragEvent:r,mirrorClasses:s,scrollOffset:this.scrollOffset,options:this.options};Promise.resolve(o).then(te).then(ne).then(re).then(se).then(ie({initial:!0})).then(oe).then((({mirrorOffset:e,initialX:t,initialY:n,...r})=>(this.mirrorOffset=e,this.initialX=t,this.initialY=n,this.lastMovedX=t,this.lastMovedY=n,{mirrorOffset:e,initialX:t,initialY:n,...r})))})),t(this,"onMirrorMove",(e=>{const t={mirror:e.mirror,dragEvent:e.dndEvent,mirrorOffset:this.mirrorOffset,options:this.options,initialX:this.initialX,initialY:this.initialY,scrollOffset:this.scrollOffset,lastMovedX:this.lastMovedX,lastMovedY:this.lastMovedY};return Promise.resolve(t).then(ie({raf:!0})).then((({lastMovedX:e,lastMovedY:t,...n})=>(this.lastMovedX=e,this.lastMovedY=t,{lastMovedX:e,lastMovedY:t,...n})))})),this.options={...ee,...this.getOptions()}}attach(){this.dnd.on("drag:start",this.onDragStart).on("drag:move",this.onDragMove).on("drag:end",this.onDragEnd).on("mirror:created",this.onMirrorCreated).on("mirror:move",this.onMirrorMove)}detach(){this.dnd.off("drag:start",this.onDragStart).off("drag:move",this.onDragMove).off("drag:end",this.onDragEnd).off("mirror:created",this.onMirrorCreated).off("mirror:move",this.onMirrorMove)}getOptions(){return this.dnd.options.mirror||{}}getAppendableContainer({source:e,event:t}){const n=this.options.appendTo;return"string"==typeof n?document.querySelector(n):n instanceof HTMLElement?n:"function"==typeof n?n({source:e,event:t}):e.parentNode}}]),t(Ce,"eventTriggeringInterval",{drag:50,dragover:50});let $e=Ce;function Ae(e,t){e.style.webkitUserSelect=t,e.style.mozUserSelect=t,e.style.msUserSelect=t,e.style.oUserSelect=t,e.style.userSelect=t}const Be=Symbol("DndContextSymbol"),Fe=Symbol("DndParentElementSymbol"),He={"source:dragging":"dnd-source--dragging","source:draggable":"dnd-source--draggable","source:disabled":"dnd-source--disabled","dropzone:over":"dnd-dropzone--over","dropzone:droppable":"dnd-dropzone--droppable","dropzone:disabled":"dnd-dropzone--disabled"},Ue={create:({source:e})=>e.nativeEl.cloneNode(!0),appendTo:({source:e})=>e.nativeEl.parentNode||document.body};function je(e){const t=e.type,n=o();function r(e){const t={...e};t.debug??(t.debug=!1),t.strict??(t.strict=!1),t.source??(t.source="dnd-source"),t.dropzone??(t.dropzone="dnd-dropzone"),t.handle??(t.handle="dnd-handle"),t.classes={...He,...t.classes||{}},"mouse"!==t.type&&"touch"!==t.type||(t.mirror={...Ue,...t.mirror||{}}),"mouse"===t.type&&(t.suppressUIEvent??(t.suppressUIEvent=!1)),"touch"===t.type&&(t.delay??(t.delay=100)),n.value=t}r({type:t,...e.options});let s=!1;const i=()=>{const n=b(E(e,"options"),(()=>{e.isDragging()?(s=!0,n()):r({type:t,...e.options})}),{flush:"pre",deep:!0})};return i(),e.on("drag:end",(()=>{s&&(s=!1,r({type:t,...e.options}),i())})),n}function qe(e,t,n){d(Fe,e.rootDndElement),e.$setRootDndElement(e.rootDndElement),i((()=>{e.rootDndElement.nativeEl=n.value||null,e.rootDndElement.nativeEl&&e.rootDndElement.nativeEl}));const{storeDndElement:r,getDndElementByNativeEl:s,deleteDndElementByNativeEl:o}=function(){const e=new Map;return{storeDndElement:(t,n)=>e.set(t,n),getDndElementByNativeEl:t=>e.get(t)||null,deleteDndElementByNativeEl:t=>e.delete(t)}}(),a={instance:e,get options(){return t.value},storeDndElement:r,getDndElementByNativeEl:s,deleteDndElementByNativeEl:o,classnamesOf:e=>J("source"===e||"dropzone"===e||"handle"===e?f(t)[e]:f(t).classes[e]),isDraggable:e=>{const t=s(e);return(null==t?void 0:t.draggable)??!1},isDroppable:n=>{const r=s(n);return!!r&&(!!r.droppable&&(!t.value.strict||!e.isDragging({id:r.id})))}};return d(Be,a),a}function Ke(e,t){const n=o(null);return i((()=>{h((r=>{n.value=e(t()),r((()=>{var e;null==(e=n.value)||e.destroy(),n.value=null}))}))})),n}function Re(e,t){const{instance:n,getDndElementByNativeEl:r}=e,{isDragging:s}=n,o=()=>e.options.strict,i=e=>{const{over:t,container:i,originalEvent:a}=e,l=t&&r(t);n.$emit("drag",{type:"drag",source:n.source,container:i,over:l?o()&&s({id:l.id})?null:l:null,originalEvent:a})},a=e=>{const{container:t,originalEvent:s}=e,o=r(e.source);n.$setSource(o),n.$emit("drag:start",{type:"drag:start",source:o,container:t,originalEvent:s})},l=e=>{const{container:t,originalEvent:s}=e,o=r(e.source);Q(o)?n.$emit("drag:prevent",{type:"drag:prevent",source:o,container:t,originalEvent:s}):console.warn("[vdnd warn]: currently attempting to drag an uncontrolled 'source', this means that the 'source' was not created through '<DndSource />', vdnd will ignore it")},c=e=>{const t=r(e.enter);if(!Q(t))return void console.warn("[vdnd warn]: currently attempting to indicate an uncontrolled 'dropzone' as the current drop target, this means that the 'dropzone' was not created through '<DndDropzone />', vdnd will ignore it");if(o()&&s({id:t.id}))return;n.$setOver(t);const{container:i,originalEvent:a}=e;n.$emit("drag:enter",{type:"drag:enter",source:n.source,enter:t,container:i,originalEvent:a})},u=e=>{const t=r(e.over);if(!Q(t))return;if(o()&&s({id:t.id}))return;const{container:i,originalEvent:a}=e;n.$emit("drag:over",{type:"drag:over",source:n.source,over:t,container:i,originalEvent:a})},d=e=>{var t;const i=r(e.leave);if(!Q(i))return;if(o()&&s({id:i.id}))return;const{container:a,originalEvent:l}=e;i.id===(null==(t=n.over)?void 0:t.id)&&n.$setOver(null),n.$emit("drag:leave",{type:"drag:leave",source:n.source,leave:i,container:a,originalEvent:l})};let p=G;const g=e=>{const{container:t,originalEvent:i}=e,a=r(e.dropzone);if(o()&&s({id:a.id}))return;const l={type:"drop",dropzone:a,source:n.source,container:t,originalEvent:i};p=()=>n.$emit("drop",l)},m=e=>{p(),p=G;const{container:t,originalEvent:i}=e,a=n.source,l=e.over&&r(e.over),c=s({id:null==l?void 0:l.id});n.$setOver(null),n.$setSource(null),O((()=>{n.$emit("drag:end",{type:"drag:end",source:a,over:l?o()&&c?null:l:null,container:t,originalEvent:i})}))};h((()=>{const e=t.value;e&&(e=>{e.on("drag",i).on("drag:prevent",l).on("drag:start",a).on("drag:enter",c).on("drag:over",u).on("drag:leave",d).on("drag:end",m).on("drop",g)})(e)}),{flush:"sync"}),v((()=>{var t,r;if(!n.isDragging())return;const{getDndElementByNativeEl:s}=e;if(null==(t=n.source)?void 0:t.nativeEl){s(n.source.nativeEl)||console.error("[vdnd error]: the current source was removed while dragging, this may lead to bugs")}if(null==(r=n.over)?void 0:r.nativeEl){s(n.over.nativeEl)||console.error("[vdnd error]: the current drop target was removed while dragging, this may lead to bugs")}}))}const Ve=s({name:"NativeDnd",props:{tag:{type:String,default:"div"},instance:{type:Object,required:!0}},emits:{drag:e=>!0,"drag:start":e=>!0,"drag:prevent":e=>!0,"drag:enter":e=>!0,"drag:over":e=>!0,"drag:leave":e=>!0,drop:e=>!0,"drag:end":e=>!0,initialized:()=>!0},setup(e,{emit:t,slots:n}){const r=e.instance,s=je(r),l=o(),c=qe(r,s,l),u=Ke((e=>new Ye(l.value,e)),(()=>{const{source:e,dropzone:t,handle:n}=s.value,{isDraggable:r,isDroppable:o}=c;return{source:e,dropzone:t,handle:n,isDraggable:r,isDroppable:o}}));Re(c,u),r.on("drag",(e=>t("drag",e))),r.on("drag:start",(e=>t("drag:start",e))),r.on("drag:prevent",(e=>t("drag:prevent",e))),r.on("drag:enter",(e=>t("drag:enter",e))),r.on("drag:leave",(e=>t("drag:leave",e))),r.on("drag:over",(e=>t("drag:over",e))),r.on("drag:end",(e=>t("drag:end",e))),r.on("drop",(e=>t("drop",e))),i((()=>{t("initialized")})),a((()=>{r.$destroy()}));return()=>p(e.tag,{ref:l},{default:n.default})}}),We=((Ge=new _e(document)).suppress("mouseenter",{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0}),Ge.suppress("mouseout",{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0}),Ge.suppress("mouseleave",{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0}),Ge.suppress("mouseover",{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0}),Ge.suppress("mousemove",{preventDefault:!1,stopPropagation:!0,stopImmediatePropagation:!0}),Ge.suppress("keypress",{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0}),Ge.suppress("keydown",{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0}),Ge.suppress("keyup",{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0}),Ge.suppress("mousewheel",{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0}),Ge);var Ge;const Je=s({name:"MouseDnd",props:{tag:{type:String,default:"div"},instance:{type:Object,required:!0}},emits:{drag:e=>!0,"drag:start":e=>!0,"drag:prevent":e=>!0,"drag:enter":e=>!0,"drag:over":e=>!0,"drag:leave":e=>!0,drop:e=>!0,"drag:end":e=>!0,initialized:()=>!0},setup(e,{emit:t,slots:n}){const r=e.instance,s=o(),l=je(r),c=qe(r,l,s),u=Ke((e=>new $e(s.value,e)),(()=>{const{source:e,dropzone:t,handle:n,mirror:r,suppressUIEvent:o}=l.value,{isDraggable:i,isDroppable:a,getDndElementByNativeEl:u}=c;return{source:e,dropzone:t,handle:n,simulator:ge,eventSuppressor:o?We:void 0,mirror:{...r,appendTo:"function"!=typeof r.appendTo?r.appendTo:({source:e,event:t})=>r.appendTo({source:u(e),container:s.value,originalEvent:t.originalEvent}),create:({source:e,event:t})=>r.create({source:u(e),container:s.value,originalEvent:t.originalEvent})},isDraggable:i,isDroppable:a}}));Re(c,u),r.on("drag",(e=>t("drag",e))),r.on("drag:start",(e=>t("drag:start",e))),r.on("drag:prevent",(e=>t("drag:prevent",e))),r.on("drag:enter",(e=>t("drag:enter",e))),r.on("drag:leave",(e=>t("drag:leave",e))),r.on("drag:over",(e=>t("drag:over",e))),r.on("drag:end",(e=>t("drag:end",e))),r.on("drop",(e=>t("drop",e))),i((()=>{t("initialized")})),a((()=>{r.$destroy()}));return()=>p(e.tag,{ref:s},{default:n.default})}}),Qe=s({name:"TouchDnd",props:{tag:{type:String,default:"div"},instance:{type:Object,required:!0}},emits:{drag:e=>!0,"drag:start":e=>!0,"drag:prevent":e=>!0,"drag:enter":e=>!0,"drag:over":e=>!0,"drag:leave":e=>!0,drop:e=>!0,"drag:end":e=>!0,initialized:()=>!0},setup(e,{emit:t,slots:n}){const r=e.instance,s=je(r),l=o(),c=qe(r,s,l),u=Ke((e=>new $e(l.value,e)),(()=>{const{source:e,dropzone:t,handle:n,mirror:r,delay:o}=s.value,{isDraggable:i,isDroppable:a,getDndElementByNativeEl:u}=c;return{source:e,dropzone:t,handle:n,delay:o,eventSuppressor:void 0,simulator:be,mirror:{...r,appendTo:"function"!=typeof r.appendTo?r.appendTo:({source:e,event:t})=>r.appendTo({source:u(e),container:l.value,originalEvent:t.originalEvent}),create:({source:e,event:t})=>r.create({source:u(e),container:l.value,originalEvent:t.originalEvent})},isDraggable:i,isDroppable:a}}));Re(c,u),r.on("drag",(e=>t("drag",e))),r.on("drag:start",(e=>t("drag:start",e))),r.on("drag:prevent",(e=>t("drag:prevent",e))),r.on("drag:enter",(e=>t("drag:enter",e))),r.on("drag:leave",(e=>t("drag:leave",e))),r.on("drag:over",(e=>t("drag:over",e))),r.on("drag:end",(e=>t("drag:end",e))),r.on("drop",(e=>t("drop",e))),i((()=>{t("initialized")})),a((()=>{r.$destroy()}));return()=>p(e.tag,{ref:l},{default:n.default})}});let Ze=0;const et=Object.prototype.hasOwnProperty;class tt{constructor(e,n,r=void 0,s=void 0,o=!1,i=!1,a=!1,l=!1){t(this,"id",Ze++),t(this,"children",[]),this.parent=e,this.nativeEl=n,this.label=r,this.value=s,this.draggable=i,this.droppable=l,this.role={source:o,dropzone:a}}matches(e){let t=0;for(const n in e)if(Q(e[n])&&et.call(e,n))switch(n){case"role":{t++;const{source:n,dropzone:r}=this.role;if("source"===e.role&&!n||"dropzone"===e.role&&!r||"*"===e.role&&(!n||!r))return!1;break}case"id":case"draggable":case"droppable":if(t++,!Object.is(this[n],e[n]))return!1;break;case"label":case"value":case"nativeEl":if(t++,J(e[n]).every((e=>!Object.is(this[n],e))))return!1}return t>0}}function nt(e,t){const n=g(Be);if(!n)return console.error(`[vdnd error]: ${e} must be descendant of DndProvider(NativeDnd, MouseDnd, TouchDnd)`),null;const{source:s,dropzone:o,draggable:i,droppable:a}=t,l=g(Fe)||null,c=new tt(l,document.body,void 0,void 0,!1,!1,!1,!1);l&&l.children.push(c),d(Fe,c),D((()=>{if(c.nativeEl&&n.deleteDndElementByNativeEl(c.nativeEl),c.parent){const e=c.parent.children.indexOf(c);e>=0&&c.parent.children.splice(e,1)}c.children.length=0})),w((()=>{c.role.source=s(),c.role.dropzone=o(),c.draggable=i(),c.droppable=a(),c.label=t.label(),c.value=t.value();const e=t.element();e&&(c.nativeEl=e,n.storeDndElement(c.nativeEl,c))}));const u=r((()=>"native"===n.options.type?{}:{"user-select":"none"}));return{attrs:r((()=>{const e={};s()&&"native"===n.options.type&&(e.draggable=!0);for(const r of(()=>{const e=n.options.debug;return"boolean"==typeof e?e?["id","label","value","value-type","role","draggable","droppable"]:[]:e})())switch(r){case"id":case"label":case"draggable":case"droppable":{const t=c[r]??"null";e[`data-dnd-${r}`]=t.toString();break}case"value":e["data-dnd-value"]="string"==typeof(t=c.value)||"number"==typeof t||"boolean"==typeof t||"symbol"==typeof t||"bigint"==typeof t?c.value:Object.prototype.toString.call(c.value);break;case"value-type":e["data-dnd-value-type"]=Z(c.value);break;case"role":{const t=[];s()&&t.push("source"),o()&&t.push("dropzone"),e["data-dnd-role"]=t.join(",");break}}var t;return e})),style:u,classes:r((()=>{const e=n.instance.source,t=n.instance.over,r=[],l=t=>"number"==typeof t?(null==e?void 0:e.id)===t:null!==e;var u;return s()&&(r.push(...n.classnamesOf("source")),l(c.id)&&r.push(...n.classnamesOf("source:dragging")),i()?r.push(...n.classnamesOf("source:draggable")):r.push(...n.classnamesOf("source:disabled"))),o()&&(r.push(...n.classnamesOf("dropzone")),!l()||n.options.strict&&l(c.id)||(("number"==typeof(u=c.id)?(null==t?void 0:t.id)===u:null!==t)&&r.push(...n.classnamesOf("dropzone:over")),a()?r.push(...n.classnamesOf("dropzone:droppable")):r.push(...n.classnamesOf("dropzone:disabled")))),r}))}}const rt=s({name:"DndSource",props:{tag:{type:String,default:"div"},label:String,value:null,draggable:{type:Boolean,default:!0},dropzone:Boolean,droppable:{type:Boolean,default:void 0}},setup(e,{slots:t}){const n=o(),r=nt("DndSource",{source:()=>!0,label:()=>e.label,value:()=>e.value,draggable:()=>e.draggable,dropzone:()=>e.dropzone,droppable:()=>void 0===e.droppable?!!e.dropzone:e.droppable,element:()=>n.value});if(!r){return()=>p(e.tag,null,{default:t.default})}const{attrs:s,style:i,classes:a}=r;return()=>p(e.tag,{ref:n,...s.value,style:i.value,class:a.value},{default:t.default})}}),st=s({name:"DndDropzone",props:{tag:{type:String,default:"div"},label:String,value:null,droppable:{type:Boolean,default:!0}},setup(e,{slots:t}){const n=o(),r=nt("DndDropzone",{source:()=>!1,draggable:()=>!1,dropzone:()=>!0,label:()=>e.label,value:()=>e.value,droppable:()=>e.droppable,element:()=>n.value});if(!r){return()=>p(e.tag,null,{default:t.default})}const{attrs:s,style:i,classes:a}=r;return()=>p(e.tag,{ref:n,...s.value,style:i.value,class:a.value},{default:t.default})}}),ot=s({name:"DndHandle",props:{tag:{type:String,default:"div"}},setup(e,{slots:t}){const n=g(Be);if(!n){console.error("[vdnd error]: DndHandle must be descendant of DndProvider(NativeDnd, MouseDnd, TouchDnd)");return()=>p(e.tag,null,{default:t.default})}const r=g(Fe);r&&null!==r.parent||console.warn("[vdnd warn]: DndHandle only functions as descendant of DndSource");const s=()=>{const e={};return"native"===n.instance.type&&(e.draggable=!0),e};return()=>p(e.tag,{...s(),class:n.classnamesOf("handle")},{default:t.default})}});function it(e){const t=o(null),n=o(null),r=o(new tt(null,null,void 0,void 0,!1,!1,!1,!1));r.value.children;const s=new W,{type:i,...a}=l(e)?c(e):e,u=m(a);return{get type(){return f(i)},get options(){return u.value},set options(e){u.value=e},get source(){return t.value},get over(){return n.value},get rootDndElement(){return r.value},isOver:function(e){return null!==n.value&&(void 0===e?null!==n.value:"string"==typeof e||Array.isArray(e)?n.value.matches({label:J(e)}):n.value.matches(e))},isDragging:function(e){return null!==t.value&&(void 0===e?null!==t.value:"string"==typeof e||Array.isArray(e)?t.value.matches({label:J(e)}):t.value.matches(e))},on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),$setOver:function(e){n.value=e},$setSource:function(e){t.value=e},$setRootDndElement:function(e){r.value=e},$emit:s.emit.bind(s),$destroy:()=>{s.destroy(),t.value=null,n.value=null,r.value.children=[]}}}function at(e={}){const t=l(e)?c(e):e;return it(u({type:"mouse",...t}))}function lt(e,...t){const n=y(e)?[...e.value]:e,r=n.push(...t);return y(e)&&(e.value=n),r}function ct(e,t){return f(e).findIndex(t)}function ut(e,t,n,r){if(!f(e).length)return!1;const s="number"!=typeof n&&"function"!=typeof n?n:e;if(!f(s).length)return!1;const o="number"==typeof t?t:ct(e,t);if(o<0||o>f(e).length-1)return!1;const i="number"==typeof n||"function"==typeof n?n:r,a="number"==typeof i?i:ct(s,i);if(a<0||a>f(s).length-1)return!1;const l=y(e)?[...e.value]:e,c=e===s?l:y(s)?[...s.value]:s,u=l[o];return l[o]=c[a],c[a]=u,y(e)&&(e.value=l),y(s)&&e!==s&&(s.value=c),!0}function dt(e,t){if(!f(e).length)return;const n="number"==typeof t?t:ct(e,t);if(n<0||n>f(e).length-1)return;const r=y(e)?[...e.value]:e,s=r.splice(n,1)[0];return y(e)&&(e.value=r),s}const ht={key:0,class:"empty"},vt=s({__name:"Example1",setup(e){const t=at({strict:!0}),n=m([1,2,3]),r=m([]),s=e=>{"left"===e.source.label&&"right"==e.dropzone.label&&lt(r,dt(n,e.source.value))},o=F({en:"Drag here","zh-cn":"拖到这里来"});return(e,i)=>(S(),L(f(Je),{instance:f(t),class:"example1",onDrop:s},{default:T((()=>[k("div",null,[(S(!0),M(_,null,z(n.value,((e,t)=>(S(),L(f(rt),{key:t,label:"left",value:t},{default:T((()=>[x(P(e),1)])),_:2},1032,["value"])))),128))]),I(f(st),{label:"right"},{default:T((()=>[r.value.length?X("",!0):(S(),M("div",ht,P(f(o)),1)),(S(!0),M(_,null,z(r.value,((e,t)=>(S(),M("div",{key:t,class:"right-box"},P(e),1)))),128))])),_:1})])),_:1},8,["instance"]))}}),pt=s({__name:"Example2",setup(e){const t=at({strict:!0}),n=m([1,2,3,4,5,6,7,8,9]),r=e=>{ut(n,e.source.value,e.dropzone.value)};return(e,s)=>(S(),L(f(Je),{instance:f(t),class:"example2",onDrop:r},{default:T((()=>[(S(!0),M(_,null,z(n.value,((e,t)=>(S(),L(f(rt),{key:e,value:t,dropzone:"",droppable:""},{default:T((()=>[x(P(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["instance"]))}}),gt={class:"tip"},mt={key:0,class:"empty"},ft={class:"right-boxes"},yt=s({__name:"Example3",setup(e){const t=function(e={}){const t=l(e)?c(e):e;return it(u({type:"native",...t}))}({strict:!0}),n=m([!1,!0,!0]),r=m([]),s=e=>{const t=n.value[e.source.value];e.originalEvent.dataTransfer.effectAllowed=t?"move":"copy"},o=e=>{if("left"===e.source.label&&"right"===e.dropzone.label){const t=e.source.value;lt(r,t?dt(n,e.source.value):t)}},i=F({en:"Drag here","zh-cn":"拖到这里来"});return(e,a)=>(S(),L(f(Ve),{instance:f(t),class:"example3",onDrop:o,"onDrag:start":s},{default:T((()=>[k("div",null,[(S(!0),M(_,null,z(n.value,((e,t)=>(S(),L(f(rt),{key:t,label:"left",value:t},{default:T((()=>[k("div",gt,"can only "+P(e?"move":"copy"),1)])),_:2},1032,["value"])))),128))]),I(f(st),{label:"right"},{default:T((()=>[r.value.length?X("",!0):(S(),M("div",mt,P(f(i)),1)),k("div",ft,[(S(!0),M(_,null,z(r.value,((e,t)=>(S(),M("div",{key:t,class:"right-box"},P(t+1),1)))),128))])])),_:1})])),_:1},8,["instance"]))}}),bt=s({__name:"Example4",setup(e){const t=at({strict:!0}),n=m([1,2,3,4,5,6,7,8,9]),r=e=>{ut(n,e.source.value,e.dropzone.value)},s=F({en:"drag me","zh-cn":"拖拽我"});return(e,o)=>(S(),L(f(Je),{instance:f(t),class:"example4",onDrop:r},{default:T((()=>[(S(!0),M(_,null,z(n.value,((e,t)=>(S(),L(f(rt),{key:e,value:t,dropzone:"",droppable:""},{default:T((()=>[I(f(ot),null,{default:T((()=>[x(P(f(s))+" "+P(e),1)])),_:2},1024)])),_:2},1032,["value"])))),128))])),_:1},8,["instance"]))}}),Et=s({__name:"Example5",setup(e){const t=u([[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,16]]),n=at({strict:!0,mirror:{constrainDimensions:!0}}),r=e=>{const{source:n,dropzone:r}=e;"subgrid"===n.label&&"subgrid"===r.label&&ut(t,n.value,r.value),"subgrid-item"===n.label&&"subgrid-item"===r.label&&ut(t[n.parent.value],n.value,t[r.parent.value],r.value)};return(e,s)=>(S(),L(f(Je),{instance:f(n),class:"example5",onDrop:r},{default:T((()=>[(S(!0),M(_,null,z(t,((e,t)=>(S(),L(f(rt),{key:t,label:"subgrid",class:"subgrid large",value:t,dropzone:f(n).isDragging("subgrid")},{default:T((()=>[(S(!0),M(_,null,z(e,((e,t)=>(S(),L(f(rt),{key:e,label:"subgrid-item",value:t,class:"subgrid-item small",dropzone:f(n).isDragging("subgrid-item")},{default:T((()=>[x(P(e),1)])),_:2},1032,["value","dropzone"])))),128))])),_:2},1032,["value","dropzone"])))),128))])),_:1},8,["instance"]))}}),Dt={class:"left"},wt={class:"right"},Ot=s({__name:"Example6",setup(e){const t=u([1,2,3,4,5]),n=m(),r=u([]),s=at({strict:!0,mirror:{constrainDimensions:!0}}),o=()=>s.isDragging("left"),i=e=>{const{source:s,dropzone:o}=e;if("left"===s.label)switch(o.label){case"right-top-hint":n.value=dt(t,s.value);break;case"right-top-item":!function(e,...t){const n=y(e)?[...e.value]:e,r=n.unshift(...t);y(e)&&(e.value=n)}(r,n.value),n.value=dt(t,s.value),r.length>3&&(lt(t,...r.slice(3)),r.length=3);break;case"right-bottom-item":ut(t,s.value,r,o.value);break;case"right-bottom-hint":lt(r,dt(t,s.value))}if("right-top-item"===s.label)switch(o.label){case"left-hint":lt(t,n.value),n.value=function(e){if(!f(e).length)return;const t=y(e)?[...e.value]:e,n=t.shift();return y(e)&&(e.value=t),n}(r);break;case"right-bottom-item":{const e=r[o.value];r[o.value]=n.value,n.value=e;break}}if("right-bottom-item"===s.label)switch(o.label){case"left-hint":lt(t,dt(r,s.value));break;case"right-top-item":{const e=r[s.value];r[s.value]=n.value,n.value=e;break}case"right-bottom-item":return void ut(r,s.value,o.value)}},a=F({en:"Drag here","zh-cn":"拖到这里来"});return(e,l)=>(S(),L(f(Je),{instance:f(s),class:"example6",onDrop:i},{default:T((()=>[k("div",Dt,[(S(!0),M(_,null,z(t,((e,t)=>(S(),L(f(rt),{key:e,label:"left",value:t,class:"left-card"},{default:T((()=>[x(P(e),1)])),_:2},1032,["value"])))),128)),s.isDragging(["right-top-item","right-bottom-item"])?(S(),L(f(st),{key:0,label:"left-hint",class:"left-card left-hint small"},{default:T((()=>[x(P(f(a)),1)])),_:1})):X("",!0)]),k("div",wt,[void 0===n.value&&0===r.length?(S(),L(f(st),{key:0,label:"right-top-hint",class:"right-top-hint large"},{default:T((()=>[x(P(f(a)),1)])),_:1})):(S(),M(_,{key:1},[I(f(rt),{label:"right-top-item",dropzone:"",class:"right-top-item large",style:Y({height:o()||r.length?"80%":"100%"})},{default:T((()=>[x(P(n.value),1)])),_:1},8,["style"]),k("div",{class:N(["right-bottom",{full:3===r.length,empty:!o()&&0===r.length}])},[(S(!0),M(_,null,z(r,((e,t)=>(S(),L(f(rt),{key:e,label:"right-bottom-item",value:t,dropzone:"",class:"right-bottom-item medium"},{default:T((()=>[x(P(e),1)])),_:2},1032,["value"])))),128)),o()&&r.length<3?(S(),L(f(st),{key:0,label:"right-bottom-hint",class:"right-bottom-hint right-bottom-item medium"},{default:T((()=>[x(P(f(a)),1)])),_:1})):X("",!0)],2)],64))])])),_:1},8,["instance"]))}}),St={class:"header"},Lt=["value"],Tt={class:"main"},kt=s({__name:"Example7",setup(e){const t=u([1,2,3,4,5,6,7,8,9]),n=[0,100,400],r=function(e={}){const t=l(e)?c(e):e;return it(u({type:"touch",...t}))}({delay:0,strict:!0,mirror:{constrainDimensions:!0}}),s=F({en:"Please slide the card up and down","zh-cn":"请上下滑动卡片"});return i((()=>{const e=setTimeout((()=>{clearTimeout(e),window.alert(s.value)}),16)})),(e,s)=>(S(),L(f(Qe),{instance:f(r),class:"example7"},{default:T((()=>[k("div",St,[s[1]||(s[1]=x(" The dnd.options.delay is ")),C(k("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>f(r).options.delay=e)},[(S(),M(_,null,z(n,(e=>k("option",{key:e,value:e},P(e),9,Lt))),64))],512),[[$,f(r).options.delay]]),s[2]||(s[2]=x(" ms "))]),k("div",Tt,[(S(!0),M(_,null,z(t,(e=>(S(),L(f(rt),{key:e},{default:T((()=>[x(P(e),1)])),_:2},1024)))),128))])])),_:1},8,["instance"]))}}),Mt={key:0},zt=[vt,pt,yt,bt,Et,Ot,kt,s({__name:"Example8",setup(e){const t=at({strict:!0,suppressUIEvent:!0}),n=F({en:"Drag me","zh-cn":"拖拽我"}),r=F({en:"Please ctrl+s","zh-cn":"请尝试ctrl+s"});return(e,s)=>(S(),L(f(Je),{instance:f(t),class:"example8"},{default:T((()=>[I(f(rt),null,{default:T((()=>[x(P(f(n)),1)])),_:1}),f(t).isDragging()?(S(),M("p",Mt,P(f(r)),1)):X("",!0)])),_:1},8,["instance"]))}})];function xt(e){return zt.map(((t,n)=>{return{title:e[n],component:t,device:(r=t,r===kt?"mobile":"pc")};var r}))}const Pt={class:"nav"},_t=["onClick"],It={class:"content"};B(s({__name:"App",setup(e){const t=F({en:"vdnd examples","zh-cn":"vdnd使用示例"}),s=F({en:xt(["Basic functions","Source that acts as dropzone","Customizes dropEffect in NativeDnd","Usage of DndHandle","Nested elements","Advanced basic functions","Special option: TouchDndOptions.delay","Special option: MouseDndOptions.suppressUIEvent"]),"zh-cn":xt(["基础功能","同时作为放置区域的源","在NativeDnd中自定义dropEffect","DndHandle的使用","元素嵌套","基础功能进阶","特殊选项：TouchDndOptions.delay","特殊选项：MouseDndOptions.suppressUIEvent"])}),{device:o,index:i,component:a}=function(e){const t=E(n("history"),"index"),s=r({get:()=>(t=>{let n=parseInt(t);return isNaN(n)&&(n=0),(n<0||n>f(e).length-1)&&(n=0),n})(t.value),set(e){t.value=String(e)}});return{index:s,component:r((()=>f(e)[s.value].component)),device:r((()=>f(e)[s.value].device))}}(s),l=F({en:"Please browser in your mobile device","zh-cn":"请在移动设备上查看"}),c=F({en:"Please browser in your computer","zh-cn":"请在电脑上查看"});return b(o,((e,t)=>{if("mobile"===e&&t&&"mobile"!==t){const e=setTimeout((()=>{clearTimeout(e),window.alert(l.value)}),16)}if("pc"===e&&t&&"pc"!==t){const e=setTimeout((()=>{clearTimeout(e),window.alert(c.value)}),16)}}),{flush:"post",immediate:!0}),(e,n)=>(S(),M("div",{class:N(["examples",[f(o)]])},[k("nav",Pt,[k("header",null,[k("h1",null,P(f(t)),1)]),k("ol",null,[(S(!0),M(_,null,z(f(s),((e,t)=>(S(),M("li",{key:t,class:N({current:f(i)===t}),onClick:e=>i.value=t},P(e.title),11,_t)))),128))])]),k("main",It,[(S(),L(A(f(a))))])],2))}})).mount("#app");
