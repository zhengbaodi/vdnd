var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);import{u as n,c as r,d as s,s as o,o as i,a,p as l,w as c,b as u,h as d,i as h,r as v,e as p,f as g,g as f,t as m,j as y,k as b,n as E,l as D,m as w,q as L,v as O,x as S,y as T,z as k,A as z,F as x,B as M,C as P,D as A,E as _,G as I,H as X,I as Y,J as N,K as $}from"./vendor-DqzpUicc.js";function C(e){const t=n("history");return r((()=>{return e[(n=t.lang,"en"!==n&&"zh-cn"!==n?"en":n)];var n}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class F{constructor(e){this.dnd=e}}class B{constructor(){t(this,"_canceled",!1)}get cancelable(){return this.constructor.cancelable}get type(){return this.constructor.type}cancel(){this.cancelable&&(this._canceled=!0)}canceled(){return this._canceled}}t(B,"type","event"),t(B,"cancelable",!1);class H extends B{constructor(e,t,n,r){super(),this.source=e,this.mirror=t,this.container=n,this.dndEvent=r}}class U extends H{}t(U,"type","mirror:created");class j extends H{}t(j,"type","mirror:attached");class q extends H{}t(q,"type","mirror:move");class K extends H{}t(K,"type","mirror:detached");class R{constructor(){t(this,"callbacks",{}),t(this,"onceCallbacks",new Set)}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}once(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this.onceCallbacks.add(t),this}off(e,t){if(!this.callbacks[e])return this;const n=this.callbacks[e],r=n.indexOf(t);return r>=0&&n.splice(r,1),this.onceCallbacks.delete(t),this}emit(e,t){if(!this.callbacks[e])return this;const n=[...this.callbacks[e]],r=[];for(let o=0;o<=n.length-1;o++){const i=n[o];try{i(t)}catch(s){r.push(s)}this.onceCallbacks.has(i)&&this.off(e,i)}return r.length&&(console.error(`[vdnd error]: caught errors while emitting '${e}':`),r.forEach((e=>console.error(e)))),this}destroy(){this.callbacks={},this.onceCallbacks.clear()}}const V=()=>{};function W(e){return Array.isArray(e)?e:[e]}function G(e){return null!=e}function J(e){if(null===e)return"null";if(void 0===e)return"undefined";if("string"==typeof e)return"string";if("number"==typeof e)return"number";if("boolean"==typeof e)return"boolean";if("symbol"==typeof e)return"symbol";if("bigint"==typeof e)return"bigint";const t=Object.prototype.toString.call(e);return t.slice(8,t.length-1)}const Q={className:"dnd-mirror",create:e=>e.source.cloneNode(!0),appendTo:e=>e.source.parentNode||document.body,constrainDimensions:!1};function Z(e){const{source:t,...n}=e;return oe((e=>{const r=t.getBoundingClientRect();e({source:t,sourceRect:r,...n})}))}function ee({dragEvent:e,sourceRect:t,options:n,...r}){return oe((s=>{const o="number"!=typeof n.cursorOffsetY?e.clientY-t.top:n.cursorOffsetY,i="number"!=typeof n.cursorOffsetX?e.clientX-t.left:n.cursorOffsetX;s({dragEvent:e,sourceRect:t,mirrorOffset:{top:o,left:i},options:n,...r})}))}function te({mirror:e,source:t,options:n,...r}){return oe((s=>{let o,i;if(n.constrainDimensions){const e=getComputedStyle(t);o=e.getPropertyValue("height"),i=e.getPropertyValue("width")}e.style.display=null,e.style.position="fixed",e.style.pointerEvents="none",e.style.top=0,e.style.left=0,e.style.margin=0,n.constrainDimensions&&(e.style.height=o,e.style.width=i),s({mirror:e,source:t,options:n,...r})}))}function ne({mirror:e,mirrorClasses:t,...n}){return oe((r=>{e.classList.add(...t),r({mirror:e,mirrorClasses:t,...n})}))}function re({mirror:e,source:t,...n}){return oe((r=>{t.getAttribute("id")===e.getAttribute("id")&&(e.removeAttribute("id"),delete e.id),r({mirror:e,...n})}))}function se(e){const{raf:t=!1,initial:n=!1}=e;return({mirror:e,dragEvent:r,mirrorOffset:s,initialY:o,initialX:i,scrollOffset:a,options:l,lastMovedX:c,lastMovedY:u,...d})=>oe((t=>{const o={mirror:e,dragEvent:r,mirrorOffset:s,options:l,...d};if(s){const t=Math.round(r.clientX-s.left-a.x),i=Math.round(r.clientY-s.top-a.y);e.style.transform=`translate3d(${t}px, ${i}px, 0)`,n&&(o.initialX=t,o.initialY=i),o.lastMovedX=t,o.lastMovedY=i}t(o)}),{raf:t})}function oe(e,{raf:t=!1}={}){return new Promise(((n,r)=>{t?requestAnimationFrame((()=>{e(n,r)})):e(n,r)}))}function ie(e,t){if(t instanceof Node)return ie(e,[t]);if(t instanceof NodeList)return ie(e,Array.from(t));function n(e){return function(e){return"string"==typeof e}(t)?e.classList.contains(t):function(e){return"function"==typeof e}(t)?t(e):function(e){return Array.isArray(e)}(t)?t.includes(e):void 0}let r=e;do{if(n(r))return r;r=(null==r?void 0:r.parentElement)||null}while(null!=r&&r!==document.body);return null}function ae(e,t){const{isHandle:n,isSource:r}=t,s=[];for(let o,i=0;i<e.children.length;i++)o=e.children.item(i),o instanceof Element&&!r(o)&&(n(o)?s.push(o):s.push(...ae(o,t)));return s}class le{constructor(e,n,r,s,o,i){t(this,"startEvent",null),t(this,"source",null),this.env=e,this.container=n,this.options=r,this.onDragStrat=s,this.onDragMove=o,this.onDragEnd=i}getSource(e){if(!(e.target instanceof Element&&ie(e.target,this.container)))return null;const t=ie(e.target,this.options.source);if(!t)return null;if(this.options.handle){const n=ae(t,{isSource:e=>e.classList.contains(this.options.source),isHandle:e=>e.classList.contains(this.options.handle)});if(n.length>0&&n.every((t=>!ie(e.target,t))))return null}return t}get dragging(){return null!==this.source}}class ce extends B{constructor(e,t,n,r,s,o){super(),this.target=e,this.source=t,this.container=n,this.clientX=r,this.clientY=s,this.originalEvent=o}}class ue extends ce{}t(ue,"type","drag:start"),t(ue,"cancelable",!0);class de extends ce{}t(de,"type","drag:move");class he extends ce{}t(he,"type","drag:end");class ve extends le{constructor(){super(...arguments),t(this,"onMouseDown",(e=>{if(0!==e.button||e.altKey||this.dragging)return;const t=this.getSource(e);t&&(this.source=t,this.startEvent=e,this.env.addEventListener("mouseup",this.onMouseUp),this.env.addEventListener("dragstart",pe),this.env.addEventListener("mousemove",this.onFirstMouseMove))})),t(this,"onKeyDown",(e=>{var t;if(this.dragging&&e.target&&!e.isComposing&&"escape"===(null==(t=e.code)?void 0:t.toLowerCase())){const{source:t,container:n}=this;this.cancel(),this.onDragEnd(new he(e.target,t,n,0,0,e))}})),t(this,"onFirstMouseMove",(()=>{this.env.removeEventListener("mousemove",this.onFirstMouseMove),this.startDrag()})),t(this,"onMouseMove",(e=>{if(!(e.target instanceof Element))return;const t=new de(e.target,this.source,this.container,e.clientX,e.clientY,e);this.onDragMove(t)})),t(this,"onMouseUp",(e=>{if(0!==e.button||!(e.target instanceof Element))return;const{source:t}=this;if(this.cancel(),t){const n=new he(e.target,t,this.container,e.clientX,e.clientY,e);this.onDragEnd(n)}})),t(this,"onContextMenuWhileDragging",(e=>{e.preventDefault()}))}attach(){return this.env.addEventListener("mousedown",this.onMouseDown,!0),this}detach(){return this.env.removeEventListener("mousedown",this.onMouseDown,!0),this.cancel(),this}startDrag(){const e=new ue(this.startEvent.target,this.source,this.container,this.startEvent.clientX,this.startEvent.clientY,this.startEvent);this.onDragStrat(e),e.canceled()?this.cancel():(this.env.addEventListener("keydown",this.onKeyDown),this.env.addEventListener("contextmenu",this.onContextMenuWhileDragging,!0),this.env.addEventListener("mousemove",this.onMouseMove))}cancel(){this.source=null,this.startEvent=null,this.env.removeEventListener("mouseup",this.onMouseUp),this.env.removeEventListener("dragstart",pe),this.env.removeEventListener("mousemove",this.onFirstMouseMove),this.env.removeEventListener("keydown",this.onKeyDown),this.env.removeEventListener("contextmenu",this.onContextMenuWhileDragging,!0),this.env.removeEventListener("mousemove",this.onMouseMove)}}function pe(e){e.preventDefault()}function ge(e){const{touches:t,changedTouches:n}=e;return t&&t[0]||n&&n[0]}let fe=!1;window.addEventListener("touchmove",(e=>{fe&&e.preventDefault()}),{passive:!1});class me extends le{constructor(){super(...arguments),t(this,"onTouchStartAt",0),t(this,"onTouchStart",(e=>{if(this.dragging||!(e.target instanceof Element))return;const t=this.getSource(e);t&&(this.source=t,this.startEvent=e,this.onTouchStartAt=Date.now(),this.env.addEventListener("touchend",this.onTouchEnd),this.env.addEventListener("touchcancel",this.onTouchEnd),this.env.addEventListener("touchmove",this.checkElapsedTime),this.env.addEventListener("contextmenu",ye))})),t(this,"startDrag",(()=>{const e=ge(this.startEvent),t=new ue(this.startEvent.target,this.source,this.container,e.pageX,e.pageY,this.startEvent);this.onDragStrat(t),t.canceled()?this.cancel():(fe=!0,this.env.addEventListener("touchmove",this.onTouchMove))})),t(this,"checkElapsedTime",(()=>{this.env.removeEventListener("touchmove",this.checkElapsedTime);Date.now()-this.onTouchStartAt>=this.delay&&this.startDrag()})),t(this,"onTouchMove",(e=>{const{pageX:t,pageY:n}=ge(e),r=document.elementFromPoint(t-window.scrollX,n-window.scrollY);if(!r)return;const s=new de(r,this.source,this.container,t,n,e);this.onDragMove(s)})),t(this,"onTouchEnd",(e=>{const{source:t}=this;if(this.cancel(),t){e.preventDefault();const{pageX:n,pageY:r}=ge(e),s=document.elementFromPoint(n-window.scrollX,r-window.scrollY);if(!s)return;const o=new he(s,t,this.container,n,r,e);this.onDragEnd(o)}}))}attach(){return this.env.addEventListener("touchstart",this.onTouchStart),this}detach(){return this.env.removeEventListener("touchstart",this.onTouchStart),this.cancel(),this}get delay(){return this.options.delay??100}cancel(){fe=!1,this.source=null,this.env.removeEventListener("touchend",this.onTouchEnd),this.env.removeEventListener("touchcancel",this.onTouchEnd),this.env.removeEventListener("touchmove",this.checkElapsedTime),this.env.removeEventListener("contextmenu",ye),this.env.removeEventListener("touchmove",this.onTouchMove)}}function ye(e){e.preventDefault(),e.stopPropagation()}class be extends R{constructor(e,n){super(),t(this,"source",null),t(this,"currentOver",null),this.container=e,this.options=n}isDraggable(e){var t,n;return(null==(n=(t=this.options).isDraggable)?void 0:n.call(t,e))??!0}isDroppable(e){var t,n;return(null==(n=(t=this.options).isDroppable)?void 0:n.call(t,e))??!0}get dragging(){return null!==this.source}isDragging(e){return!!this.dragging&&(e?this.source===e:this.dragging)}}class Ee extends B{constructor(e,t,n,r){super(),this.source=e,this.over=t,this.container=n,this.originalEvent=r}}t(Ee,"type","drag");class De extends B{constructor(e,t,n,r,s){super(),this.source=e,this.container=t,this.originalEvent=n,this.clientX=r,this.clientY=s}}t(De,"type","drag:start");class we extends B{constructor(e,t,n){super(),this.source=e,this.container=t,this.originalEvent=n}}t(we,"type","drag:prevent");class Le extends B{constructor(e,t,n,r){super(),this.source=e,this.enter=t,this.container=n,this.originalEvent=r}}t(Le,"type","drag:enter");class Oe extends B{constructor(e,t,n,r,s,o){super(),this.source=e,this.over=t,this.container=n,this.originalEvent=r,this.clientX=s,this.clientY=o}}t(Oe,"type","drag:move");class Se extends B{constructor(e,t,n,r){super(),this.source=e,this.over=t,this.container=n,this.originalEvent=r}}t(Se,"type","drag:over");class Te extends B{constructor(e,t,n,r){super(),this.source=e,this.leave=t,this.container=n,this.originalEvent=r}}t(Te,"type","drag:leave");class ke extends B{constructor(e,t,n,r){super(),this.source=e,this.dropzone=t,this.container=n,this.originalEvent=r}}t(ke,"type","drop");class ze extends B{constructor(e,t,n,r){super(),this.source=e,this.over=t,this.container=n,this.originalEvent=r}}t(ze,"type","drag:end");class xe{constructor(e,n,r){t(this,"destoryed",!1),t(this,"onSignalAborted",(()=>{this.destroy()})),this.type=e,this.listener=n,this.options=r,this.options.signal&&(this.options.signal.aborted?this.destroy():this.options.signal.addEventListener("abort",this.onSignalAborted))}is(e){return this.listener===e}call(e){if(!this.destoryed&&e.type===this.type)try{this.options.passive&&(e.preventDefault=()=>{}),this.listener(e)}finally{this.options.once&&this.destroy()}}destroy(){var e;this.destoryed=!0,null==(e=this.options.signal)||e.removeEventListener("abort",this.onSignalAborted)}}function Me(e,t){for(const n of e)if(n.is(t))return n;return null}class Pe{constructor(e,n,r,s){t(this,"scopeToAliveListeners",new Map),t(this,"suppress",(e=>{if(this.isEnabled()&&this.isTrustedEvent(e)){this.behavior.preventDefault&&e.preventDefault(),this.behavior.stopPropagation&&e.stopPropagation(),this.behavior.stopImmediatePropagation&&e.stopImmediatePropagation();for(const t of this.scopeToAliveListeners.values()){for(const n of t)n.options.capture&&n.call(e);for(const n of t)n.options.capture||n.call(e)}}})),this.type=e,this.behavior=n,this.isEnabled=r,this.isTrustedEvent=s,document.addEventListener(e,this.suppress,{capture:!0})}findAliveListener(e,t){const n=this.scopeToAliveListeners.get(e);return n?Me(n.values(),t):null}addAliveEventListener(e,t,n,r={}){if(this.type!==t)return;const s=new xe(t,n,r);s.call=s.call.bind(s),document.addEventListener(t,s.call,r);let o=this.scopeToAliveListeners.get(e);o||(o=new Set,this.scopeToAliveListeners.set(e,o)),o.add(s)}removeAliveEventListener(e,t,n,r={}){if(this.type!==t)return;const s=this.findAliveListener(e,n);s&&(this.scopeToAliveListeners.get(e).delete(s),document.removeEventListener(t,s.call,r))}clear(e){const t=this.scopeToAliveListeners.get(e);if(t){for(const e of t)e.destroy(),document.removeEventListener(e.type,e.call,e.options);this.scopeToAliveListeners.delete(e)}}destroy(){for(const e of this.scopeToAliveListeners.values())for(const t of e)t.destroy(),document.removeEventListener(t.type,t.call,t.options);this.scopeToAliveListeners.clear(),document.removeEventListener(this.type,this.suppress,{capture:!0})}}function Ae(e){return _e.isTrustedEvent(e)}class _e{constructor(e){t(this,"enabled",!1),t(this,"typeToSpecificEventSuppressor",new Map);const n=Object.keys(e),r=()=>this.enabled;for(const t of n){const n=new Pe(t,e[t],r,Ae);this.typeToSpecificEventSuppressor.set(t,n)}}enable(){this.enabled=!0}disable(){this.enabled=!1}getSpecificEventSuppressor(e){return this.typeToSpecificEventSuppressor.get(e)||null}getAllSpecificEventSuppressors(){return this.typeToSpecificEventSuppressor.values()}destroy(){const e=this.getAllSpecificEventSuppressors();for(const t of e)t.destroy()}}t(_e,"isTrustedEvent",(e=>e.isTrusted));class Ie{constructor(e,n){t(this,"nativeListenerProxys",new Set),this.env=e,this.scope=n}enable(){this.env.enable()}disable(){this.env.disable()}addAliveEventListener(e,t,n={}){const r=this.env.getSpecificEventSuppressor(e);r?r.addAliveEventListener(this.scope,e,t,n):this.addNativeEventListener(e,t,n)}removeAliveEventListener(e,t,n={}){const r=this.env.getSpecificEventSuppressor(e);r?r.removeAliveEventListener(this.scope,e,t,n):this.removeNativeEventListener(e,t,n)}addNativeEventListener(e,t,n={}){const r=new xe(e,t,n);r.call=r.call.bind(r),document.addEventListener(e,r.call,n),this.nativeListenerProxys.add(r)}removeNativeEventListener(e,t,n={}){const r=Me(this.nativeListenerProxys.values(),t);r&&(document.removeEventListener(e,r.call,n),this.nativeListenerProxys.delete(r))}destroy(){const e=this.env.getAllSpecificEventSuppressors();for(const n of e)n.clear(this.scope);const t=this.nativeListenerProxys.values();for(const n of t)document.removeEventListener(n.type,n.call,n.options);this.nativeListenerProxys.clear()}}function Xe(e,t){e.dropEffect=t?$e(e.effectAllowed):"none"}function Ye(e,t){t?"none"===e.dropEffect&&(e.dropEffect=$e(e.effectAllowed),console.warn("[vdnd warn]: Do you set the 'dataTransfer.dropEffect' to 'none'? The 'dataTransfer.dropEffect' for a droppable dropzone must not be 'none', vdnd will force it to be set to not 'none'.")):"none"!==e.dropEffect&&(e.dropEffect="none",console.warn("[vdnd warn]: Do you set the 'dataTransfer.dropEffect' to not 'none'? The 'dataTransfer.dropEffect' for a not droppable dropzone must be 'none', vdnd will force it to be set to 'none'."))}let Ne=class extends be{constructor(e,n){super(e,n),t(this,"shouldSkipDragLeaveHandler",!1),t(this,"temporaryPreviousOver",null),t(this,"temporaryLeave",null),t(this,"trigger",null),t(this,"onDrag",(e=>{if(!(this.dragging&&e.target instanceof Element&&e.dataTransfer&&ie(e.target,this.trigger)))return;const t=new Ee(this.source,this.currentOver,this.container,e);this.emit("drag",t)})),t(this,"onDragStart",(e=>{if(this.dragging||!e.dataTransfer)return;if(!ie(e.target,this.container))return null;const t=ie(e.target,this.options.source);if(!t)return;let n,r=[];if(this.options.handle&&(r=ae(t,{isSource:e=>e.classList.contains(this.options.source),isHandle:e=>e.classList.contains(this.options.handle)}),r.length)){if(n=r.find((t=>!!ie(e.target,t))),!n)return void e.preventDefault();if(!function(e,t){let n=e;for(;n!==t&&!n.draggable&&n.parentElement;)n=n.parentElement;return n!==t}(n,t))return void console.error("[vdnd error]: NativeDnd requires the handle must be draggable, the illegal handle is ",n)}if(!this.isDraggable(t)){e.preventDefault();const n=new we(t,this.container,e);return void this.emit("drag:prevent",n)}if(this.source=t,this.trigger=n||t,n&&e.dataTransfer){const{top:t,left:n}=this.source.getBoundingClientRect();e.dataTransfer.setDragImage(this.source,e.clientX-n,e.clientY-t)}const s=new De(t,this.container,e);this.emit("drag:start",s)})),t(this,"onDragEnter",(e=>{if(!(this.dragging&&e.target instanceof Element&&e.dataTransfer))return;const t=ie(e.target,this.container)&&ie(e.target,this.options.dropzone);if(!t)return;if(e.preventDefault(),Xe(e.dataTransfer,this.isDroppable(t)),this.temporaryLeave=null,t===this.currentOver)return void(this.shouldSkipDragLeaveHandler=!0);this.temporaryPreviousOver=this.currentOver,this.currentOver=t;const n=new Le(this.source,t,this.container,e);this.emit("drag:enter",n),Ye(e.dataTransfer,this.isDroppable(t))})),t(this,"onDragLeave",(e=>{if(!this.dragging||this.shouldSkipDragLeaveHandler||!e.dataTransfer||e.target!==this.temporaryPreviousOver&&e.target!==this.currentOver)return void(this.shouldSkipDragLeaveHandler=!1);this.shouldSkipDragLeaveHandler=!1;const t=this.temporaryPreviousOver||this.currentOver;this.temporaryPreviousOver=null,null===e.relatedTarget&&(this.temporaryLeave=t),t===this.currentOver&&(this.currentOver=null);const n=new Te(this.source,t,this.container,e);this.emit("drag:leave",n)})),t(this,"onDragOver",(e=>{if(!(this.dragging&&this.currentOver&&e.target instanceof Element&&e.dataTransfer&&ie(e.target,this.currentOver)))return;const t=this.isDroppable(this.currentOver);t&&e.preventDefault(),Xe(e.dataTransfer,t);const n=new Se(this.source,this.currentOver,this.container,e);this.emit("drag:over",n),Ye(e.dataTransfer,this.isDroppable(this.currentOver))})),t(this,"onDrop",(e=>{if(!(this.dragging&&this.currentOver&&e.target instanceof Element&&e.dataTransfer&&ie(e.target,this.currentOver)&&this.isDroppable(this.currentOver)))return;const t=new ke(this.source,this.currentOver,this.container,e);this.emit("drop",t)})),t(this,"onDragEnd",(e=>{if(!(this.dragging&&e.target instanceof Element&&e.dataTransfer&&ie(e.target,this.trigger)))return;const t=new ze(this.source,this.currentOver||this.temporaryLeave,this.container,e);this.emit("drag:end",t),this.trigger=null,this.source=null,this.currentOver=null,this.temporaryPreviousOver=null,this.temporaryLeave=null,this.shouldSkipDragLeaveHandler=!1})),this.container=e,this.options=n,document.addEventListener("drag",this.onDrag),document.addEventListener("dragstart",this.onDragStart),document.addEventListener("dragenter",this.onDragEnter),document.addEventListener("dragover",this.onDragOver),document.addEventListener("dragleave",this.onDragLeave),document.addEventListener("dragend",this.onDragEnd),document.addEventListener("drop",this.onDrop)}destroy(){this.dragging||(document.removeEventListener("drag",this.onDrag),document.removeEventListener("dragstart",this.onDragStart),document.removeEventListener("dragenter",this.onDragEnter),document.removeEventListener("dragover",this.onDragOver),document.removeEventListener("dragleave",this.onDragLeave),document.removeEventListener("dragend",this.onDragEnd),document.removeEventListener("drop",this.onDrop),super.destroy())}};function $e(e){switch(e){case"all":case"copy":case"none":case"copyLink":case"copyMove":case"uninitialized":return"copy";case"link":case"linkMove":return"link";case"move":return"move"}}const Ce=class e extends be{constructor(n,r){super(n,r),t(this,"plugins",[]),t(this,"simulator",null),t(this,"eventSuppressor",null),t(this,"clearIntervalTaskForDrag",V),t(this,"clearIntervalTaskForDragOver",V),this.container=n,this.options=r,this.addPlugin(...e.defaultPlugins),this.eventSuppressor=r.eventSuppressor||null,this.setSimulator(this.options.simulator),this.initIntervalTasks()}destroy(){var e;this.dragging||(this.removePlugin(...this.plugins.map((e=>e.constructor))),this.setSimulator(null),null==(e=this.eventSuppressor)||e.destroy(),super.destroy())}addPlugin(...e){const t=e.map((e=>new e(this)));return t.forEach((e=>e.attach())),this.plugins=[...this.plugins,...t],this}removePlugin(...e){return this.plugins.filter((t=>e.some((e=>t instanceof e)))).forEach((e=>e.detach())),this.plugins=this.plugins.filter((t=>e.some((e=>t instanceof e)))),this}initIntervalTasks(){this.runIntervalTaskForDrag=t=>{const n=setInterval((()=>{if(!t.canceled()&&this.dragging){const e=new Ee(this.source,this.currentOver,this.container,null);this.emit("drag",e)}}),e.eventTriggeringInterval.drag);this.clearIntervalTaskForDrag=()=>{clearInterval(n),this.clearIntervalTaskForDrag=V}},this.on("drag:start",this.runIntervalTaskForDrag),this.on("drag:end",(()=>this.clearIntervalTaskForDrag())),this.runIntervalTaskForDragOver=()=>{const t=setInterval((()=>{if(!this.dragging||!this.currentOver)return;const e=new Se(this.source,this.currentOver,this.container,null);this.emit("drag:over",e)}),e.eventTriggeringInterval.dragover);this.clearIntervalTaskForDragOver=()=>{clearInterval(t),this.clearIntervalTaskForDragOver=V}},this.on("drag:enter",this.runIntervalTaskForDragOver),this.on("drag:leave",(()=>this.clearIntervalTaskForDragOver()))}setSimulator(e){var t,n;if(this.dragging)return;if(!e)return null==(t=this.simulator)||t.detach(),void(this.simulator=null);null==(n=this.simulator)||n.detach();const r=this.eventSuppressor?{addEventListener:this.eventSuppressor.addAliveEventListener.bind(this.eventSuppressor),removeEventListener:this.eventSuppressor.removeAliveEventListener.bind(this.eventSuppressor)}:document;return this.simulator=new e(r,this.container,this.options,this.onDragStart.bind(this),this.onDragMove.bind(this),this.onDragEnd.bind(this)),this.simulator.attach(),this}onDragStart(e){var t;if(this.dragging)return;if(!this.isDraggable(e.source)){const t=new we(e.source,this.container,e.originalEvent);return this.emit("drag:prevent",t),void e.cancel()}this.source=e.source,null==(t=this.eventSuppressor)||t.enable(),Be(document.body,"none");const n=new De(this.source,this.container,e.originalEvent,e.clientX,e.clientY);if(this.emit("drag:start",n),ie(this.source,this.options.dropzone)){this.currentOver=this.source;const t=new Le(this.source,this.source,this.container,e.originalEvent);this.emit("drag:enter",t)}}onDragMove(e){if(!this.dragging)return;const t=ie(e.target,this.container)&&ie(e.target,this.options.dropzone),n=t?!!this.currentOver&&t!==this.currentOver:!!this.currentOver;let r=null;if(t&&this.currentOver!==t){r=t;const n=new Le(this.source,t,this.container,e.originalEvent);this.emit("drag:enter",n)}if(n){const t=new Te(this.source,this.currentOver,this.container,e.originalEvent);this.emit("drag:leave",t),this.currentOver=null}r&&(this.currentOver=r);const s=new Oe(this.source,this.currentOver,this.container,e.originalEvent,e.clientX,e.clientY);this.emit("drag:move",s)}onDragEnd(e){var t;if(!this.dragging)return;if(null==(t=this.eventSuppressor)||t.disable(),Be(document.body,""),this.currentOver){if(!(e.originalEvent instanceof KeyboardEvent)&&this.isDroppable(this.currentOver)){const t=new ke(this.source,this.currentOver,this.container,e.originalEvent);this.emit("drop",t)}else{const t=new Te(this.source,this.currentOver,this.container,e.originalEvent);this.emit("drag:leave",t)}}const n=new ze(this.source,this.currentOver,this.container,e.originalEvent);this.emit("drag:end",n),this.source=null,this.currentOver=null}};t(Ce,"defaultPlugins",[class extends F{constructor(e){super(e),t(this,"scrollOffset",{x:0,y:0}),t(this,"initialScrollOffset",{x:window.scrollX,y:window.scrollY}),t(this,"lastMovedX",0),t(this,"lastMovedY",0),t(this,"mirrorOffset",{top:0,left:0}),t(this,"initialX",0),t(this,"initialY",0),t(this,"mirror",null),t(this,"onDragStart",(async e=>{"ontouchstart"in window&&document.addEventListener("scroll",this.onScroll,!0),this.initialScrollOffset={x:window.scrollX,y:window.scrollY};const{source:t,container:n}=e,r=this.getAppendableContainer({source:t,event:e})||document.body,s=this.options.create;this.mirror=s({source:t,event:e});const o=new U(t,this.mirror,n,e);this.dnd.emit("mirror:created",o);const i=new j(t,this.mirror,n,e);r.appendChild(this.mirror),this.dnd.emit("mirror:attached",i)})),t(this,"onDragMove",(e=>{if(!this.mirror)return;const{source:t,container:n}=e,r=new q(t,this.mirror,n,e);this.dnd.emit("mirror:move",r)})),t(this,"onDragEnd",(e=>{if("ontouchstart"in window&&document.removeEventListener("scroll",this.onScroll,!0),this.initialScrollOffset={x:0,y:0},this.scrollOffset={x:0,y:0},!this.mirror)return;const{source:t,container:n}=e,r=new K(t,this.mirror,n,e);this.mirror.remove(),this.dnd.emit("mirror:detached",r)})),t(this,"onScroll",(()=>{this.scrollOffset={x:window.scrollX-this.initialScrollOffset.x,y:window.scrollY-this.initialScrollOffset.y}})),t(this,"onMirrorCreated",(e=>{const{mirror:t,source:n,dndEvent:r}=e,s=W(this.options.className||"");"style"in t&&"object"==typeof t.style&&(t.style.display="none");const o={mirror:t,source:n,dragEvent:r,mirrorClasses:s,scrollOffset:this.scrollOffset,options:this.options};Promise.resolve(o).then(Z).then(ee).then(te).then(ne).then(se({initial:!0})).then(re).then((({mirrorOffset:e,initialX:t,initialY:n,...r})=>(this.mirrorOffset=e,this.initialX=t,this.initialY=n,this.lastMovedX=t,this.lastMovedY=n,{mirrorOffset:e,initialX:t,initialY:n,...r})))})),t(this,"onMirrorMove",(e=>{const t={mirror:e.mirror,dragEvent:e.dndEvent,mirrorOffset:this.mirrorOffset,options:this.options,initialX:this.initialX,initialY:this.initialY,scrollOffset:this.scrollOffset,lastMovedX:this.lastMovedX,lastMovedY:this.lastMovedY};return Promise.resolve(t).then(se({raf:!0})).then((({lastMovedX:e,lastMovedY:t,...n})=>(this.lastMovedX=e,this.lastMovedY=t,{lastMovedX:e,lastMovedY:t,...n})))})),this.options={...Q,...this.getOptions()}}attach(){this.dnd.on("drag:start",this.onDragStart).on("drag:move",this.onDragMove).on("drag:end",this.onDragEnd).on("mirror:created",this.onMirrorCreated).on("mirror:move",this.onMirrorMove)}detach(){this.dnd.off("drag:start",this.onDragStart).off("drag:move",this.onDragMove).off("drag:end",this.onDragEnd).off("mirror:created",this.onMirrorCreated).off("mirror:move",this.onMirrorMove)}getOptions(){return this.dnd.options.mirror||{}}getAppendableContainer({source:e,event:t}){const n=this.options.appendTo;return"string"==typeof n?document.querySelector(n):n instanceof HTMLElement?n:"function"==typeof n?n({source:e,event:t}):e.parentNode}}]),t(Ce,"eventTriggeringInterval",{drag:50,dragover:50});let Fe=Ce;function Be(e,t){e.style.webkitUserSelect=t,e.style.mozUserSelect=t,e.style.msUserSelect=t,e.style.oUserSelect=t,e.style.userSelect=t}const He=Symbol("DndContextSymbol"),Ue=Symbol("DndParentElementSymbol"),je={"source:dragging":"dnd-source--dragging","source:draggable":"dnd-source--draggable","source:disabled":"dnd-source--disabled","dropzone:over":"dnd-dropzone--over","dropzone:droppable":"dnd-dropzone--droppable","dropzone:disabled":"dnd-dropzone--disabled"},qe={create:({source:e})=>e.nativeEl.cloneNode(!0),appendTo:({source:e})=>e.nativeEl.parentNode||document.body};function Ke(e){const t=e.type,n=o();function r(e){const t={...e};t.debug??(t.debug=!1),t.strict??(t.strict=!1),t.source??(t.source="dnd-source"),t.dropzone??(t.dropzone="dnd-dropzone"),t.handle??(t.handle="dnd-handle"),t.classes={...je,...t.classes||{}},"mouse"!==t.type&&"touch"!==t.type||(t.mirror={...qe,...t.mirror||{}}),"mouse"===t.type&&(t.suppressUIEvent??(t.suppressUIEvent=!1)),"touch"===t.type&&(t.delay??(t.delay=100)),n.value=t}r({type:t,...e.options});let s=!1;const i=()=>{const n=f(m(e,"options"),(()=>{e.isDragging()?(s=!0,n()):r({type:t,...e.options})}),{flush:"pre",deep:!0})};return i(),e.on("drag:end",(()=>{s&&(s=!1,r({type:t,...e.options}),i())})),n}function Re(e,t,n){l(Ue,e.rootDndElement),e.$setRootDndElement(e.rootDndElement),i((()=>{e.rootDndElement.nativeEl=n.value||null,e.rootDndElement.nativeEl&&e.rootDndElement.nativeEl}));const{storeDndElement:r,getDndElementByNativeEl:s,deleteDndElementByNativeEl:o}=function(){const e=new Map;return{storeDndElement:(t,n)=>e.set(t,n),getDndElementByNativeEl:t=>e.get(t)||null,deleteDndElementByNativeEl:t=>e.delete(t)}}(),a={instance:e,get options(){return t.value},storeDndElement:r,getDndElementByNativeEl:s,deleteDndElementByNativeEl:o,classnamesOf:e=>W("source"===e||"dropzone"===e||"handle"===e?g(t)[e]:g(t).classes[e]),isDraggable:e=>{const t=s(e);return(null==t?void 0:t.draggable)??!1},isDroppable:n=>{const r=s(n);return!!r&&(!!r.droppable&&(!t.value.strict||!e.isDragging({id:r.id})))}};return l(He,a),a}function Ve(e,t){const n=o(null);return i((()=>{c((r=>{n.value=e(t()),r((()=>{var e;null==(e=n.value)||e.destroy(),n.value=null}))}))})),n}function We(e,t){const{instance:n,getDndElementByNativeEl:r}=e,{isDragging:s}=n,o=()=>e.options.strict,i=e=>{const{over:t,container:i,originalEvent:a}=e,l=t&&r(t);n.$emit("drag",{type:"drag",source:n.source,container:i,over:l?o()&&s({id:l.id})?null:l:null,originalEvent:a})},a=e=>{const{container:t,originalEvent:s}=e,o=r(e.source);n.$setSource(o),n.$emit("drag:start",{type:"drag:start",source:o,container:t,originalEvent:s})},l=e=>{const{container:t,originalEvent:s}=e,o=r(e.source);G(o)?n.$emit("drag:prevent",{type:"drag:prevent",source:o,container:t,originalEvent:s}):console.warn("[vdnd warn]: currently attempting to drag an uncontrolled 'source', this means that the 'source' was not created through '<DndSource />', vdnd will ignore it")},d=e=>{const t=r(e.enter);if(!G(t))return void console.warn("[vdnd warn]: currently attempting to indicate an uncontrolled 'dropzone' as the current drop target, this means that the 'dropzone' was not created through '<DndDropzone />', vdnd will ignore it");if(o()&&s({id:t.id}))return;n.$setOver(t);const{container:i,originalEvent:a}=e;n.$emit("drag:enter",{type:"drag:enter",source:n.source,enter:t,container:i,originalEvent:a})},h=e=>{const t=r(e.over);if(!G(t))return;if(o()&&s({id:t.id}))return;const{container:i,originalEvent:a}=e;n.$emit("drag:over",{type:"drag:over",source:n.source,over:t,container:i,originalEvent:a})},v=e=>{var t;const i=r(e.leave);if(!G(i))return;if(o()&&s({id:i.id}))return;const{container:a,originalEvent:l}=e;i.id===(null==(t=n.over)?void 0:t.id)&&n.$setOver(null),n.$emit("drag:leave",{type:"drag:leave",source:n.source,leave:i,container:a,originalEvent:l})};let p=V;const g=e=>{const{container:t,originalEvent:i}=e,a=r(e.dropzone);if(o()&&s({id:a.id}))return;const l={type:"drop",dropzone:a,source:n.source,container:t,originalEvent:i};p=()=>n.$emit("drop",l)},f=e=>{p(),p=V;const{container:t,originalEvent:i}=e,a=n.source,l=e.over&&r(e.over),c=s({id:null==l?void 0:l.id});n.$setOver(null),n.$setSource(null),E((()=>{n.$emit("drag:end",{type:"drag:end",source:a,over:l?o()&&c?null:l:null,container:t,originalEvent:i})}))};c((()=>{const e=t.value;e&&(e=>{e.on("drag",i).on("drag:prevent",l).on("drag:start",a).on("drag:enter",d).on("drag:over",h).on("drag:leave",v).on("drag:end",f).on("drop",g)})(e)}),{flush:"sync"}),u((()=>{var t,r;if(!n.isDragging())return;const{getDndElementByNativeEl:s}=e;if(null==(t=n.source)?void 0:t.nativeEl){s(n.source.nativeEl)||console.error("[vdnd error]: the current source was removed while dragging, this may lead to bugs")}if(null==(r=n.over)?void 0:r.nativeEl){s(n.over.nativeEl)||console.error("[vdnd error]: the current drop target was removed while dragging, this may lead to bugs")}}))}const Ge=s({name:"NativeDnd",props:{tag:{type:String,default:"div"},instance:{type:Object,required:!0}},emits:{drag:e=>!0,"drag:start":e=>!0,"drag:prevent":e=>!0,"drag:enter":e=>!0,"drag:over":e=>!0,"drag:leave":e=>!0,drop:e=>!0,"drag:end":e=>!0,initialized:()=>!0},setup(e,{emit:t,slots:n}){const r=e.instance,s=Ke(r),l=o(),c=Re(r,s,l),u=Ve((e=>new Ne(l.value,e)),(()=>{const{source:e,dropzone:t,handle:n}=s.value,{isDraggable:r,isDroppable:o}=c;return{source:e,dropzone:t,handle:n,isDraggable:r,isDroppable:o}}));We(c,u),r.on("drag",(e=>t("drag",e))),r.on("drag:start",(e=>t("drag:start",e))),r.on("drag:prevent",(e=>t("drag:prevent",e))),r.on("drag:enter",(e=>t("drag:enter",e))),r.on("drag:leave",(e=>t("drag:leave",e))),r.on("drag:over",(e=>t("drag:over",e))),r.on("drag:end",(e=>t("drag:end",e))),r.on("drop",(e=>t("drop",e))),i((()=>{t("initialized")})),a((()=>{r.$destroy()}));return()=>d(e.tag,{ref:l},{default:n.default})}}),Je=class e{static create(){return new Ie(e.env,"mouse-dnd-"+e.uid++)}};t(Je,"uid",1),t(Je,"env",new _e({mouseenter:{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0},mouseout:{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0},mouseleave:{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0},mouseover:{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0},mousemove:{preventDefault:!1,stopPropagation:!0,stopImmediatePropagation:!0},keypress:{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0},keydown:{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0},keyup:{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0},mousewheel:{preventDefault:!0,stopPropagation:!0,stopImmediatePropagation:!0}}));let Qe=Je;const Ze=s({name:"MouseDnd",props:{tag:{type:String,default:"div"},instance:{type:Object,required:!0}},emits:{drag:e=>!0,"drag:start":e=>!0,"drag:prevent":e=>!0,"drag:enter":e=>!0,"drag:over":e=>!0,"drag:leave":e=>!0,drop:e=>!0,"drag:end":e=>!0,initialized:()=>!0},setup(e,{emit:t,slots:n}){const r=e.instance,s=o(),l=Ke(r),c=Re(r,l,s),u=Ve((e=>new Fe(s.value,e)),(()=>{const{source:e,dropzone:t,handle:n,mirror:r,suppressUIEvent:o}=l.value,{isDraggable:i,isDroppable:a,getDndElementByNativeEl:u}=c;return{source:e,dropzone:t,handle:n,simulator:ve,eventSuppressor:o?Qe.create():void 0,mirror:{...r,appendTo:"function"!=typeof r.appendTo?r.appendTo:({source:e,event:t})=>r.appendTo({source:u(e),container:s.value,originalEvent:t.originalEvent}),create:({source:e,event:t})=>r.create({source:u(e),container:s.value,originalEvent:t.originalEvent})},isDraggable:i,isDroppable:a}}));We(c,u),r.on("drag",(e=>t("drag",e))),r.on("drag:start",(e=>t("drag:start",e))),r.on("drag:prevent",(e=>t("drag:prevent",e))),r.on("drag:enter",(e=>t("drag:enter",e))),r.on("drag:leave",(e=>t("drag:leave",e))),r.on("drag:over",(e=>t("drag:over",e))),r.on("drag:end",(e=>t("drag:end",e))),r.on("drop",(e=>t("drop",e))),i((()=>{t("initialized")})),a((()=>{r.$destroy()}));return()=>d(e.tag,{ref:s},{default:n.default})}}),et=s({name:"TouchDnd",props:{tag:{type:String,default:"div"},instance:{type:Object,required:!0}},emits:{drag:e=>!0,"drag:start":e=>!0,"drag:prevent":e=>!0,"drag:enter":e=>!0,"drag:over":e=>!0,"drag:leave":e=>!0,drop:e=>!0,"drag:end":e=>!0,initialized:()=>!0},setup(e,{emit:t,slots:n}){const r=e.instance,s=Ke(r),l=o(),c=Re(r,s,l),u=Ve((e=>new Fe(l.value,e)),(()=>{const{source:e,dropzone:t,handle:n,mirror:r,delay:o}=s.value,{isDraggable:i,isDroppable:a,getDndElementByNativeEl:u}=c;return{source:e,dropzone:t,handle:n,delay:o,eventSuppressor:void 0,simulator:me,mirror:{...r,appendTo:"function"!=typeof r.appendTo?r.appendTo:({source:e,event:t})=>r.appendTo({source:u(e),container:l.value,originalEvent:t.originalEvent}),create:({source:e,event:t})=>r.create({source:u(e),container:l.value,originalEvent:t.originalEvent})},isDraggable:i,isDroppable:a}}));We(c,u),r.on("drag",(e=>t("drag",e))),r.on("drag:start",(e=>t("drag:start",e))),r.on("drag:prevent",(e=>t("drag:prevent",e))),r.on("drag:enter",(e=>t("drag:enter",e))),r.on("drag:leave",(e=>t("drag:leave",e))),r.on("drag:over",(e=>t("drag:over",e))),r.on("drag:end",(e=>t("drag:end",e))),r.on("drop",(e=>t("drop",e))),i((()=>{t("initialized")})),a((()=>{r.$destroy()}));return()=>d(e.tag,{ref:l},{default:n.default})}});let tt=0;const nt=Object.prototype.hasOwnProperty;class rt{constructor(e,n,r=void 0,s=void 0,o=!1,i=!1,a=!1,l=!1){t(this,"id",tt++),t(this,"children",[]),this.parent=e,this.nativeEl=n,this.label=r,this.value=s,this.draggable=i,this.droppable=l,this.role={source:o,dropzone:a}}matches(e){let t=0;for(const n in e)if(G(e[n])&&nt.call(e,n))switch(n){case"role":{t++;const{source:n,dropzone:r}=this.role;if("source"===e.role&&!n||"dropzone"===e.role&&!r||"*"===e.role&&(!n||!r))return!1;break}case"id":case"draggable":case"droppable":if(t++,!Object.is(this[n],e[n]))return!1;break;case"label":case"value":case"nativeEl":if(t++,W(e[n]).every((e=>!Object.is(this[n],e))))return!1}return t>0}}function st(e,t){const n=h(He);if(!n)return console.error(`[vdnd error]: ${e} must be descendant of DndProvider(NativeDnd, MouseDnd, TouchDnd)`),null;const{source:s,dropzone:o,draggable:i,droppable:a}=t,c=h(Ue)||null,u=new rt(c,document.body,void 0,void 0,!1,!1,!1,!1);c&&c.children.push(u),l(Ue,u),y((()=>{if(u.nativeEl&&n.deleteDndElementByNativeEl(u.nativeEl),u.parent){const e=u.parent.children.indexOf(u);e>=0&&u.parent.children.splice(e,1)}u.children.length=0})),b((()=>{u.role.source=s(),u.role.dropzone=o(),u.draggable=i(),u.droppable=a(),u.label=t.label(),u.value=t.value();const e=t.element();e&&(u.nativeEl=e,n.storeDndElement(u.nativeEl,u))}));const d=r((()=>"native"===n.options.type?{}:{"user-select":"none"}));return{attrs:r((()=>{const e={};s()&&"native"===n.options.type&&(e.draggable=!0);for(const r of(()=>{const e=n.options.debug;return"boolean"==typeof e?e?["id","label","value","value-type","role","draggable","droppable"]:[]:e})())switch(r){case"id":case"label":case"draggable":case"droppable":{const t=u[r]??"null";e[`data-dnd-${r}`]=t.toString();break}case"value":e["data-dnd-value"]="string"==typeof(t=u.value)||"number"==typeof t||"boolean"==typeof t||"symbol"==typeof t||"bigint"==typeof t?u.value:Object.prototype.toString.call(u.value);break;case"value-type":e["data-dnd-value-type"]=J(u.value);break;case"role":{const t=[];s()&&t.push("source"),o()&&t.push("dropzone"),e["data-dnd-role"]=t.join(",");break}}var t;return e})),style:d,classes:r((()=>{const e=n.instance.source,t=n.instance.over,r=[],l=t=>"number"==typeof t?(null==e?void 0:e.id)===t:null!==e;var c;return s()&&(r.push(...n.classnamesOf("source")),l(u.id)&&r.push(...n.classnamesOf("source:dragging")),i()?r.push(...n.classnamesOf("source:draggable")):r.push(...n.classnamesOf("source:disabled"))),o()&&(r.push(...n.classnamesOf("dropzone")),!l()||n.options.strict&&l(u.id)||(("number"==typeof(c=u.id)?(null==t?void 0:t.id)===c:null!==t)&&r.push(...n.classnamesOf("dropzone:over")),a()?r.push(...n.classnamesOf("dropzone:droppable")):r.push(...n.classnamesOf("dropzone:disabled")))),r}))}}const ot=s({name:"DndSource",props:{tag:{type:String,default:"div"},label:String,value:null,draggable:{type:Boolean,default:!0},dropzone:Boolean,droppable:{type:Boolean,default:void 0}},setup(e,{slots:t}){const n=o(),r=st("DndSource",{source:()=>!0,label:()=>e.label,value:()=>e.value,draggable:()=>e.draggable,dropzone:()=>e.dropzone,droppable:()=>void 0===e.droppable?!!e.dropzone:e.droppable,element:()=>n.value});if(!r){return()=>d(e.tag,null,{default:t.default})}const{attrs:s,style:i,classes:a}=r;return()=>d(e.tag,{ref:n,...s.value,style:i.value,class:a.value},{default:t.default})}}),it=s({name:"DndDropzone",props:{tag:{type:String,default:"div"},label:String,value:null,droppable:{type:Boolean,default:!0}},setup(e,{slots:t}){const n=o(),r=st("DndDropzone",{source:()=>!1,draggable:()=>!1,dropzone:()=>!0,label:()=>e.label,value:()=>e.value,droppable:()=>e.droppable,element:()=>n.value});if(!r){return()=>d(e.tag,null,{default:t.default})}const{attrs:s,style:i,classes:a}=r;return()=>d(e.tag,{ref:n,...s.value,style:i.value,class:a.value},{default:t.default})}}),at=s({name:"DndHandle",props:{tag:{type:String,default:"div"}},setup(e,{slots:t}){const n=h(He);if(!n){console.error("[vdnd error]: DndHandle must be descendant of DndProvider(NativeDnd, MouseDnd, TouchDnd)");return()=>d(e.tag,null,{default:t.default})}const r=h(Ue);r&&null!==r.parent||console.warn("[vdnd warn]: DndHandle only functions as descendant of DndSource");const s=()=>{const e={};return"native"===n.instance.type&&(e.draggable=!0),e};return()=>d(e.tag,{...s(),class:n.classnamesOf("handle")},{default:t.default})}});function lt(e){const t=o(null),n=o(null),r=o(new rt(null,null,void 0,void 0,!1,!1,!1,!1));r.value.children;const s=new R,{type:i,...a}=e,l=v(a);return{get type(){return i},get options(){return l.value},set options(e){l.value=e},get source(){return t.value},get over(){return n.value},get rootDndElement(){return r.value},isOver:function(e){return null!==n.value&&(void 0===e?null!==n.value:"string"==typeof e||Array.isArray(e)?n.value.matches({label:W(e)}):n.value.matches(e))},isDragging:function(e){return null!==t.value&&(void 0===e?null!==t.value:"string"==typeof e||Array.isArray(e)?t.value.matches({label:W(e)}):t.value.matches(e))},on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),$setOver:function(e){n.value=e},$setSource:function(e){t.value=e},$setRootDndElement:function(e){r.value=e},$emit:s.emit.bind(s),$destroy:()=>{s.destroy(),t.value=null,n.value=null,r.value.children=[]}}}function ct(e={}){return lt({type:"mouse",...e})}function ut(e,...t){const n=p(e)?[...e.value]:e,r=n.push(...t);return p(e)&&(e.value=n),r}function dt(e,t){return g(e).findIndex(t)}function ht(e,t,n,r){if(!g(e).length)return!1;const s="number"!=typeof n&&"function"!=typeof n?n:e;if(!g(s).length)return!1;const o="number"==typeof t?t:dt(e,t);if(o<0||o>g(e).length-1)return!1;const i="number"==typeof n||"function"==typeof n?n:r,a="number"==typeof i?i:dt(s,i);if(a<0||a>g(s).length-1)return!1;const l=p(e)?[...e.value]:e,c=e===s?l:p(s)?[...s.value]:s,u=l[o];return l[o]=c[a],c[a]=u,p(e)&&(e.value=l),p(s)&&e!==s&&(s.value=c),!0}function vt(e,t){if(!g(e).length)return;const n="number"==typeof t?t:dt(e,t);if(n<0||n>g(e).length-1)return;const r=p(e)?[...e.value]:e,s=r.splice(n,1)[0];return p(e)&&(e.value=r),s}const pt={key:0,class:"empty"},gt=s({__name:"Example1",setup(e){const t=ct({strict:!0}),n=v([1,2,3]),r=v([]),s=e=>{"left"===e.source.label&&"right"==e.dropzone.label&&ut(r,vt(n,e.source.value))},o=C({en:"Drag here","zh-cn":"拖到这里来"});return(e,i)=>(D(),w(g(Ze),{instance:g(t),class:"example1",onDrop:s},{default:L((()=>[O("div",null,[(D(!0),S(x,null,T(n.value,((e,t)=>(D(),w(g(ot),{key:t,label:"left",value:t},{default:L((()=>[k(z(e),1)])),_:2},1032,["value"])))),128))]),M(g(it),{label:"right"},{default:L((()=>[r.value.length?P("",!0):(D(),S("div",pt,z(g(o)),1)),(D(!0),S(x,null,T(r.value,((e,t)=>(D(),S("div",{key:t,class:"right-box"},z(e),1)))),128))])),_:1})])),_:1},8,["instance"]))}}),ft=s({__name:"Example2",setup(e){const t=ct({strict:!0}),n=v([1,2,3,4,5,6,7,8,9]),r=e=>{ht(n,e.source.value,e.dropzone.value)};return(e,s)=>(D(),w(g(Ze),{instance:g(t),class:"example2",onDrop:r},{default:L((()=>[(D(!0),S(x,null,T(n.value,((e,t)=>(D(),w(g(ot),{key:e,value:t,dropzone:"",droppable:""},{default:L((()=>[k(z(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["instance"]))}}),mt={class:"tip"},yt={key:0,class:"empty"},bt={class:"right-boxes"},Et=s({__name:"Example3",setup(e){const t=function(e={}){return lt({type:"native",...e})}({strict:!0}),n=v([!1,!0,!0]),r=v([]),s=e=>{const t=n.value[e.source.value];e.originalEvent.dataTransfer.effectAllowed=t?"move":"copy"},o=e=>{if("left"===e.source.label&&"right"===e.dropzone.label){const t=e.source.value;ut(r,t?vt(n,e.source.value):t)}},i=C({en:"Drag here","zh-cn":"拖到这里来"}),a=C({en:e=>"can only "+(e?"move":"copy"),"zh-cn":e=>`只能${e?"移动":"复制"}我`});return(e,l)=>(D(),w(g(Ge),{instance:g(t),class:"example3",onDrop:o,"onDrag:start":s},{default:L((()=>[O("div",null,[(D(!0),S(x,null,T(n.value,((e,t)=>(D(),w(g(ot),{key:t,label:"left",value:t},{default:L((()=>[O("div",mt,z(g(a)(e)),1)])),_:2},1032,["value"])))),128))]),M(g(it),{label:"right"},{default:L((()=>[r.value.length?P("",!0):(D(),S("div",yt,z(g(i)),1)),O("div",bt,[(D(!0),S(x,null,T(r.value,((e,t)=>(D(),S("div",{key:t,class:"right-box"},z(t+1),1)))),128))])])),_:1})])),_:1},8,["instance"]))}}),Dt=s({__name:"Example4",setup(e){const t=ct({strict:!0}),n=v([1,2,3,4,5,6,7,8,9]),r=e=>{ht(n,e.source.value,e.dropzone.value)},s=C({en:"drag me","zh-cn":"拖拽我"});return(e,o)=>(D(),w(g(Ze),{instance:g(t),class:"example4",onDrop:r},{default:L((()=>[(D(!0),S(x,null,T(n.value,((e,t)=>(D(),w(g(ot),{key:e,value:t,dropzone:"",droppable:""},{default:L((()=>[M(g(at),null,{default:L((()=>[k(z(g(s))+" "+z(e),1)])),_:2},1024)])),_:2},1032,["value"])))),128))])),_:1},8,["instance"]))}}),wt=s({__name:"Example5",setup(e){const t=A([[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,16]]),n=ct({strict:!0,mirror:{constrainDimensions:!0}}),r=e=>{const{source:n,dropzone:r}=e;"subgrid"===n.label&&"subgrid"===r.label&&ht(t,n.value,r.value),"subgrid-item"===n.label&&"subgrid-item"===r.label&&ht(t[n.parent.value],n.value,t[r.parent.value],r.value)};return(e,s)=>(D(),w(g(Ze),{instance:g(n),class:"example5",onDrop:r},{default:L((()=>[(D(!0),S(x,null,T(t,((e,t)=>(D(),w(g(ot),{key:t,label:"subgrid",class:"subgrid large",value:t,dropzone:g(n).isDragging("subgrid")},{default:L((()=>[(D(!0),S(x,null,T(e,((e,t)=>(D(),w(g(ot),{key:e,label:"subgrid-item",value:t,class:"subgrid-item small",dropzone:g(n).isDragging("subgrid-item")},{default:L((()=>[k(z(e),1)])),_:2},1032,["value","dropzone"])))),128))])),_:2},1032,["value","dropzone"])))),128))])),_:1},8,["instance"]))}}),Lt={class:"left"},Ot={class:"right"},St=s({__name:"Example6",setup(e){const t=A([1,2,3,4,5]),n=v(),r=A([]),s=ct({strict:!0,mirror:{constrainDimensions:!0}}),o=()=>s.isDragging("left"),i=e=>{const{source:s,dropzone:o}=e;if("left"===s.label)switch(o.label){case"right-top-hint":n.value=vt(t,s.value);break;case"right-top-item":!function(e,...t){const n=p(e)?[...e.value]:e,r=n.unshift(...t);p(e)&&(e.value=n)}(r,n.value),n.value=vt(t,s.value),r.length>3&&(ut(t,...r.slice(3)),r.length=3);break;case"right-bottom-item":ht(t,s.value,r,o.value);break;case"right-bottom-hint":ut(r,vt(t,s.value))}if("right-top-item"===s.label)switch(o.label){case"left-hint":ut(t,n.value),n.value=function(e){if(!g(e).length)return;const t=p(e)?[...e.value]:e,n=t.shift();return p(e)&&(e.value=t),n}(r);break;case"right-bottom-item":{const e=r[o.value];r[o.value]=n.value,n.value=e;break}}if("right-bottom-item"===s.label)switch(o.label){case"left-hint":ut(t,vt(r,s.value));break;case"right-top-item":{const e=r[s.value];r[s.value]=n.value,n.value=e;break}case"right-bottom-item":return void ht(r,s.value,o.value)}},a=C({en:"Drag here","zh-cn":"拖到这里来"});return(e,l)=>(D(),w(g(Ze),{instance:g(s),class:"example6",onDrop:i},{default:L((()=>[O("div",Lt,[(D(!0),S(x,null,T(t,((e,t)=>(D(),w(g(ot),{key:e,label:"left",value:t,class:"left-card"},{default:L((()=>[k(z(e),1)])),_:2},1032,["value"])))),128)),s.isDragging(["right-top-item","right-bottom-item"])?(D(),w(g(it),{key:0,label:"left-hint",class:"left-card left-hint small"},{default:L((()=>[k(z(g(a)),1)])),_:1})):P("",!0)]),O("div",Ot,[void 0===n.value&&0===r.length?(D(),w(g(it),{key:0,label:"right-top-hint",class:"right-top-hint large"},{default:L((()=>[k(z(g(a)),1)])),_:1})):(D(),S(x,{key:1},[M(g(ot),{label:"right-top-item",dropzone:"",class:"right-top-item large",style:_({height:o()||r.length?"80%":"100%"})},{default:L((()=>[k(z(n.value),1)])),_:1},8,["style"]),O("div",{class:I(["right-bottom",{full:3===r.length,empty:!o()&&0===r.length}])},[(D(!0),S(x,null,T(r,((e,t)=>(D(),w(g(ot),{key:e,label:"right-bottom-item",value:t,dropzone:"",class:"right-bottom-item medium"},{default:L((()=>[k(z(e),1)])),_:2},1032,["value"])))),128)),o()&&r.length<3?(D(),w(g(it),{key:0,label:"right-bottom-hint",class:"right-bottom-hint right-bottom-item medium"},{default:L((()=>[k(z(g(a)),1)])),_:1})):P("",!0)],2)],64))])])),_:1},8,["instance"]))}}),Tt={class:"header"},kt=["value"],zt={class:"main"},xt=s({__name:"Example7",setup(e){const t=A([1,2,3,4,5,6,7,8,9]),n=[0,100,400],r=function(e={}){return lt({type:"touch",...e})}({delay:0,strict:!0,mirror:{constrainDimensions:!0}}),s=C({en:"Please slide the card up and down","zh-cn":"请上下滑动卡片"});return i((()=>{const e=setTimeout((()=>{clearTimeout(e),window.alert(s.value)}),16)})),(e,s)=>(D(),w(g(et),{instance:g(r),class:"example7"},{default:L((()=>[O("div",Tt,[s[1]||(s[1]=k(" The dnd.options.delay is ")),X(O("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>g(r).options.delay=e)},[(D(),S(x,null,T(n,(e=>O("option",{key:e,value:e},z(e),9,kt))),64))],512),[[Y,g(r).options.delay]]),s[2]||(s[2]=k(" ms "))]),O("div",zt,[(D(!0),S(x,null,T(t,(e=>(D(),w(g(ot),{key:e},{default:L((()=>[k(z(e),1)])),_:2},1024)))),128))])])),_:1},8,["instance"]))}}),Mt={key:0},Pt=[gt,ft,Et,Dt,wt,St,xt,s({__name:"Example8",setup(e){const t=ct({strict:!0,suppressUIEvent:!0}),n=C({en:"Drag me","zh-cn":"拖拽我"}),r=C({en:"Please ctrl+s","zh-cn":"请尝试ctrl+s"});return(e,s)=>(D(),w(g(Ze),{instance:g(t),class:"example8"},{default:L((()=>[M(g(ot),null,{default:L((()=>[k(z(g(n)),1)])),_:1}),g(t).isDragging()?(D(),S("p",Mt,z(g(r)),1)):P("",!0)])),_:1},8,["instance"]))}})];function At(e){return Pt.map(((t,n)=>{return{title:e[n],component:t,device:(r=t,r===xt?"mobile":"pc")};var r}))}const _t={class:"nav"},It=["onClick"],Xt={class:"content"};$(s({__name:"App",setup(e){const t=C({en:"vdnd examples","zh-cn":"vdnd使用示例"}),s=C({en:At(["Basic functions","Source that acts as dropzone","Customizes dropEffect in NativeDnd","Usage of DndHandle","Nested elements","Advanced basic functions","Special option: TouchDndOptions.delay","Special option: MouseDndOptions.suppressUIEvent"]),"zh-cn":At(["基础功能","同时作为放置区域的源","在NativeDnd中自定义dropEffect","DndHandle的使用","元素嵌套","基础功能进阶","特殊选项：TouchDndOptions.delay","特殊选项：MouseDndOptions.suppressUIEvent"])}),{device:o,index:i,component:a}=function(e){const t=m(n("history"),"index"),s=r({get:()=>(t=>{let n=parseInt(t);return isNaN(n)&&(n=0),(n<0||n>g(e).length-1)&&(n=0),n})(t.value),set(e){t.value=String(e)}});return{index:s,component:r((()=>g(e)[s.value].component)),device:r((()=>g(e)[s.value].device))}}(s),l=C({en:"Please browser in your mobile device","zh-cn":"请在移动设备上查看"}),c=C({en:"Please browser in your computer","zh-cn":"请在电脑上查看"});return f(o,((e,t)=>{if("mobile"===e&&t&&"mobile"!==t){const e=setTimeout((()=>{clearTimeout(e),window.alert(l.value)}),16)}if("pc"===e&&t&&"pc"!==t){const e=setTimeout((()=>{clearTimeout(e),window.alert(c.value)}),16)}}),{flush:"post",immediate:!0}),(e,n)=>(D(),S("div",{class:I(["examples",[g(o)]])},[O("nav",_t,[O("header",null,[O("h1",null,z(g(t)),1)]),O("ol",null,[(D(!0),S(x,null,T(g(s),((e,t)=>(D(),S("li",{key:t,class:I({current:g(i)===t}),onClick:e=>i.value=t},z(e.title),11,It)))),128))])]),O("main",Xt,[(D(),w(N(g(a))))])],2))}})).mount("#app");
